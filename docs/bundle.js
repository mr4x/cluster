(()=>{var Bn=Object.create;var he=Object.defineProperty;var $n=Object.getOwnPropertyDescriptor;var Vn=Object.getOwnPropertyNames;var Nn=Object.getPrototypeOf,Wn=Object.prototype.hasOwnProperty;var Un=o=>he(o,"__esModule",{value:!0});var O=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var _n=(o,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of Vn(e))!Wn.call(o,t)&&t!=="default"&&he(o,t,{get:()=>e[t],enumerable:!(r=$n(e,t))||r.enumerable});return o},Ie=o=>_n(Un(he(o!=null?Bn(Nn(o)):{},"default",o&&o.__esModule&&"default"in o?{get:()=>o.default,enumerable:!0}:{value:o,enumerable:!0})),o);var zr=O((we,Cr)=>{(function(){var o,e,r,t,n,s,i,h,u,a,l,c,m,f,p;r=Math.floor,a=Math.min,e=function(d,g){return d<g?-1:d>g?1:0},u=function(d,g,w,y,M){var S;if(w==null&&(w=0),M==null&&(M=e),w<0)throw new Error("lo must be non-negative");for(y==null&&(y=d.length);w<y;)S=r((w+y)/2),M(g,d[S])<0?y=S:w=S+1;return[].splice.apply(d,[w,w-w].concat(g)),g},s=function(d,g,w){return w==null&&(w=e),d.push(g),f(d,0,d.length-1,w)},n=function(d,g){var w,y;return g==null&&(g=e),w=d.pop(),d.length?(y=d[0],d[0]=w,p(d,0,g)):y=w,y},h=function(d,g,w){var y;return w==null&&(w=e),y=d[0],d[0]=g,p(d,0,w),y},i=function(d,g,w){var y;return w==null&&(w=e),d.length&&w(d[0],g)<0&&(y=[d[0],g],g=y[0],d[0]=y[1],p(d,0,w)),g},t=function(d,g){var w,y,M,S,v,b,j,R;for(g==null&&(g=e),b=function(){R=[];for(var z=0,P=r(d.length/2);0<=P?z<P:z>P;0<=P?z++:z--)R.push(z);return R}.apply(this).reverse(),j=[],y=0,S=b.length;y<S;y++)w=b[y],j.push(p(d,w,g));return j},m=function(d,g,w){var y;if(w==null&&(w=e),y=d.indexOf(g),y!==-1)return f(d,0,y,w),p(d,y,w)},l=function(d,g,w){var y,M,S,v,b;if(w==null&&(w=e),M=d.slice(0,g),!M.length)return M;for(t(M,w),b=d.slice(g),S=0,v=b.length;S<v;S++)y=b[S],i(M,y,w);return M.sort(w).reverse()},c=function(d,g,w){var y,M,S,v,b,j,R,z,P,L;if(w==null&&(w=e),g*10<=d.length){if(v=d.slice(0,g).sort(w),!v.length)return v;for(S=v[v.length-1],z=d.slice(g),b=0,R=z.length;b<R;b++)y=z[b],w(y,S)<0&&(u(v,y,0,null,w),v.pop(),S=v[v.length-1]);return v}for(t(d,w),L=[],M=j=0,P=a(g,d.length);0<=P?j<P:j>P;M=0<=P?++j:--j)L.push(n(d,w));return L},f=function(d,g,w,y){var M,S,v;for(y==null&&(y=e),M=d[w];w>g;){if(v=w-1>>1,S=d[v],y(M,S)<0){d[w]=S,w=v;continue}break}return d[w]=M},p=function(d,g,w){var y,M,S,v,b;for(w==null&&(w=e),M=d.length,b=g,S=d[g],y=2*g+1;y<M;)v=y+1,v<M&&!(w(d[y],d[v])<0)&&(y=v),d[g]=d[y],g=y,y=2*g+1;return d[g]=S,f(d,b,g,w)},o=function(){d.push=s,d.pop=n,d.replace=h,d.pushpop=i,d.heapify=t,d.updateItem=m,d.nlargest=l,d.nsmallest=c;function d(g){this.cmp=g??e,this.nodes=[]}return d.prototype.push=function(g){return s(this.nodes,g,this.cmp)},d.prototype.pop=function(){return n(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},d.prototype.replace=function(g){return h(this.nodes,g,this.cmp)},d.prototype.pushpop=function(g){return i(this.nodes,g,this.cmp)},d.prototype.heapify=function(){return t(this.nodes,this.cmp)},d.prototype.updateItem=function(g){return m(this.nodes,g,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var g;return g=new d,g.nodes=this.nodes.slice(0),g},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,g){return typeof define=="function"&&define.amd?define([],g):typeof we=="object"?Cr.exports=g():d.Heap=g()}(this,function(){return o})}).call(we)});var Or=O((Xo,Tr)=>{Tr.exports=zr()});var Y=O((Br,Gt)=>{(function(o,e){typeof Gt=="object"&&Gt.exports?Gt.exports=e():o.Zdog=e()})(Br,function(){var e={};e.TAU=Math.PI*2,e.extend=function(t,n){for(var s in n)t[s]=n[s];return t},e.lerp=function(t,n,s){return(n-t)*s+t},e.modulo=function(t,n){return(t%n+n)%n};var r={2:function(t){return t*t},3:function(t){return t*t*t},4:function(t){return t*t*t*t},5:function(t){return t*t*t*t*t}};return e.easeInOut=function(t,n){if(n==1)return t;t=Math.max(0,Math.min(1,t));var s=t<.5,i=s?t:1-t;i/=.5;var h=r[n]||r[2],u=h(i);return u/=2,s?u:1-u},e})});var ke=O(($r,Bt)=>{(function(o,e){typeof Bt=="object"&&Bt.exports?Bt.exports=e():o.Zdog.CanvasRenderer=e()})($r,function(){var e={isCanvas:!0};return e.begin=function(r){r.beginPath()},e.move=function(r,t,n){r.moveTo(n.x,n.y)},e.line=function(r,t,n){r.lineTo(n.x,n.y)},e.bezier=function(r,t,n,s,i){r.bezierCurveTo(n.x,n.y,s.x,s.y,i.x,i.y)},e.closePath=function(r){r.closePath()},e.setPath=function(){},e.renderPath=function(r,t,n,s){this.begin(r,t),n.forEach(function(i){i.render(r,t,e)}),s&&this.closePath(r,t)},e.stroke=function(r,t,n,s,i){!n||(r.strokeStyle=s,r.lineWidth=i,r.stroke())},e.fill=function(r,t,n,s){!n||(r.fillStyle=s,r.fill())},e.end=function(){},e})});var be=O((Vr,$t)=>{(function(o,e){typeof $t=="object"&&$t.exports?$t.exports=e():o.Zdog.SvgRenderer=e()})(Vr,function(){var e={isSvg:!0},r=e.round=function(n){return Math.round(n*1e3)/1e3};function t(n){return r(n.x)+","+r(n.y)+" "}return e.begin=function(){},e.move=function(n,s,i){return"M"+t(i)},e.line=function(n,s,i){return"L"+t(i)},e.bezier=function(n,s,i,h,u){return"C"+t(i)+t(h)+t(u)},e.closePath=function(){return"Z"},e.setPath=function(n,s,i){s.setAttribute("d",i)},e.renderPath=function(n,s,i,h){var u="";i.forEach(function(a){u+=a.render(n,s,e)}),h&&(u+=this.closePath(n,s)),this.setPath(n,s,u)},e.stroke=function(n,s,i,h,u){!i||(s.setAttribute("stroke",h),s.setAttribute("stroke-width",u))},e.fill=function(n,s,i,h){var u=i?h:"none";s.setAttribute("fill",u)},e.end=function(n,s){n.appendChild(s)},e})});var ut=O((Nr,Vt)=>{(function(o,e){if(typeof Vt=="object"&&Vt.exports)Vt.exports=e(Y());else{var r=o.Zdog;r.Vector=e(r)}})(Nr,function(e){function r(i){this.set(i)}var t=e.TAU;r.prototype.set=function(i){return this.x=i&&i.x||0,this.y=i&&i.y||0,this.z=i&&i.z||0,this},r.prototype.write=function(i){return i?(this.x=i.x!=null?i.x:this.x,this.y=i.y!=null?i.y:this.y,this.z=i.z!=null?i.z:this.z,this):this},r.prototype.rotate=function(i){if(!!i)return this.rotateZ(i.z),this.rotateY(i.y),this.rotateX(i.x),this},r.prototype.rotateZ=function(i){n(this,i,"x","y")},r.prototype.rotateX=function(i){n(this,i,"y","z")},r.prototype.rotateY=function(i){n(this,i,"x","z")};function n(i,h,u,a){if(!(!h||h%t==0)){var l=Math.cos(h),c=Math.sin(h),m=i[u],f=i[a];i[u]=m*l-f*c,i[a]=f*l+m*c}}r.prototype.isSame=function(i){return i?this.x===i.x&&this.y===i.y&&this.z===i.z:!1},r.prototype.add=function(i){return i?(this.x+=i.x||0,this.y+=i.y||0,this.z+=i.z||0,this):this},r.prototype.subtract=function(i){return i?(this.x-=i.x||0,this.y-=i.y||0,this.z-=i.z||0,this):this},r.prototype.multiply=function(i){return i==null?this:(typeof i=="number"?(this.x*=i,this.y*=i,this.z*=i):(this.x*=i.x!=null?i.x:1,this.y*=i.y!=null?i.y:1,this.z*=i.z!=null?i.z:1),this)},r.prototype.transform=function(i,h,u){return this.multiply(u),this.rotate(h),this.add(i),this},r.prototype.lerp=function(i,h){return this.x=e.lerp(this.x,i.x||0,h),this.y=e.lerp(this.y,i.y||0,h),this.z=e.lerp(this.z,i.z||0,h),this},r.prototype.magnitude=function(){var i=this.x*this.x+this.y*this.y+this.z*this.z;return s(i)};function s(i){return Math.abs(i-1)<1e-8?1:Math.sqrt(i)}return r.prototype.magnitude2d=function(){var i=this.x*this.x+this.y*this.y;return s(i)},r.prototype.copy=function(){return new r(this)},r})});var tt=O((Wr,Nt)=>{(function(o,e){if(typeof Nt=="object"&&Nt.exports)Nt.exports=e(Y(),ut(),ke(),be());else{var r=o.Zdog;r.Anchor=e(r,r.Vector,r.CanvasRenderer,r.SvgRenderer)}})(Wr,function(e,r,t,n){var s=e.TAU,i={x:1,y:1,z:1};function h(a){this.create(a||{})}h.prototype.create=function(a){this.children=[],e.extend(this,this.constructor.defaults),this.setOptions(a),this.translate=new r(a.translate),this.rotate=new r(a.rotate),this.scale=new r(i).multiply(this.scale),this.origin=new r,this.renderOrigin=new r,this.addTo&&this.addTo.addChild(this)},h.defaults={},h.optionKeys=Object.keys(h.defaults).concat(["rotate","translate","scale","addTo"]),h.prototype.setOptions=function(a){var l=this.constructor.optionKeys;for(var c in a)l.indexOf(c)!=-1&&(this[c]=a[c])},h.prototype.addChild=function(a){this.children.indexOf(a)==-1&&(a.remove(),a.addTo=this,this.children.push(a))},h.prototype.removeChild=function(a){var l=this.children.indexOf(a);l!=-1&&this.children.splice(l,1)},h.prototype.remove=function(){this.addTo&&this.addTo.removeChild(this)},h.prototype.update=function(){this.reset(),this.children.forEach(function(a){a.update()}),this.transform(this.translate,this.rotate,this.scale)},h.prototype.reset=function(){this.renderOrigin.set(this.origin)},h.prototype.transform=function(a,l,c){this.renderOrigin.transform(a,l,c),this.children.forEach(function(m){m.transform(a,l,c)})},h.prototype.updateGraph=function(){this.update(),this.updateFlatGraph(),this.flatGraph.forEach(function(a){a.updateSortValue()}),this.flatGraph.sort(h.shapeSorter)},h.shapeSorter=function(a,l){return a.sortValue-l.sortValue},Object.defineProperty(h.prototype,"flatGraph",{get:function(){return this._flatGraph||this.updateFlatGraph(),this._flatGraph},set:function(a){this._flatGraph=a}}),h.prototype.updateFlatGraph=function(){this.flatGraph=this.getFlatGraph()},h.prototype.getFlatGraph=function(){var a=[this];return this.addChildFlatGraph(a)},h.prototype.addChildFlatGraph=function(a){return this.children.forEach(function(l){var c=l.getFlatGraph();Array.prototype.push.apply(a,c)}),a},h.prototype.updateSortValue=function(){this.sortValue=this.renderOrigin.z},h.prototype.render=function(){},h.prototype.renderGraphCanvas=function(a){if(!a)throw new Error("ctx is "+a+". Canvas context required for render. Check .renderGraphCanvas( ctx ).");this.flatGraph.forEach(function(l){l.render(a,t)})},h.prototype.renderGraphSvg=function(a){if(!a)throw new Error("svg is "+a+". SVG required for render. Check .renderGraphSvg( svg ).");this.flatGraph.forEach(function(l){l.render(a,n)})},h.prototype.copy=function(a){var l={},c=this.constructor.optionKeys;c.forEach(function(f){l[f]=this[f]},this),e.extend(l,a);var m=this.constructor;return new m(l)},h.prototype.copyGraph=function(a){var l=this.copy(a);return this.children.forEach(function(c){c.copyGraph({addTo:l})}),l},h.prototype.normalizeRotate=function(){this.rotate.x=e.modulo(this.rotate.x,s),this.rotate.y=e.modulo(this.rotate.y,s),this.rotate.z=e.modulo(this.rotate.z,s)};function u(a){return function(l){function c(m){this.create(m||{})}return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.defaults=e.extend({},a.defaults),e.extend(c.defaults,l),c.optionKeys=a.optionKeys.slice(0),Object.keys(c.defaults).forEach(function(m){!c.optionKeys.indexOf(m)!=1&&c.optionKeys.push(m)}),c.subclass=u(c),c}}return h.subclass=u(h),h})});var xe=O((Ur,Wt)=>{(function(o,e){typeof Wt=="object"&&Wt.exports?Wt.exports=e():o.Zdog.Dragger=e()})(Ur,function(){var e=typeof window!="undefined",r="mousedown",t="mousemove",n="mouseup";e&&(window.PointerEvent?(r="pointerdown",t="pointermove",n="pointerup"):"ontouchstart"in window&&(r="touchstart",t="touchmove",n="touchend"));function s(){}function i(h){this.create(h||{})}return i.prototype.create=function(h){this.onDragStart=h.onDragStart||s,this.onDragMove=h.onDragMove||s,this.onDragEnd=h.onDragEnd||s,this.bindDrag(h.startElement)},i.prototype.bindDrag=function(h){h=this.getQueryElement(h),!!h&&(h.style.touchAction="none",h.addEventListener(r,this))},i.prototype.getQueryElement=function(h){return typeof h=="string"&&(h=document.querySelector(h)),h},i.prototype.handleEvent=function(h){var u=this["on"+h.type];u&&u.call(this,h)},i.prototype.onmousedown=i.prototype.onpointerdown=function(h){this.dragStart(h,h)},i.prototype.ontouchstart=function(h){this.dragStart(h,h.changedTouches[0])},i.prototype.dragStart=function(h,u){h.preventDefault(),this.dragStartX=u.pageX,this.dragStartY=u.pageY,e&&(window.addEventListener(t,this),window.addEventListener(n,this)),this.onDragStart(u)},i.prototype.ontouchmove=function(h){this.dragMove(h,h.changedTouches[0])},i.prototype.onmousemove=i.prototype.onpointermove=function(h){this.dragMove(h,h)},i.prototype.dragMove=function(h,u){h.preventDefault();var a=u.pageX-this.dragStartX,l=u.pageY-this.dragStartY;this.onDragMove(u,a,l)},i.prototype.onmouseup=i.prototype.onpointerup=i.prototype.ontouchend=i.prototype.dragEnd=function(){window.removeEventListener(t,this),window.removeEventListener(n,this),this.onDragEnd()},i})});var Yr=O((_r,Ut)=>{(function(o,e){if(typeof Ut=="object"&&Ut.exports)Ut.exports=e(Y(),tt(),xe());else{var r=o.Zdog;r.Illustration=e(r,r.Anchor,r.Dragger)}})(_r,function(e,r,t){function n(){}var s=e.TAU,i=r.subclass({element:void 0,centered:!0,zoom:1,dragRotate:!1,resize:!1,onPrerender:n,onDragStart:n,onDragMove:n,onDragEnd:n,onResize:n});e.extend(i.prototype,t.prototype),i.prototype.create=function(u){r.prototype.create.call(this,u),t.prototype.create.call(this,u),this.setElement(this.element),this.setDragRotate(this.dragRotate),this.setResize(this.resize)},i.prototype.setElement=function(u){if(u=this.getQueryElement(u),!u)throw new Error("Zdog.Illustration element required. Set to "+u);var a=u.nodeName.toLowerCase();a=="canvas"?this.setCanvas(u):a=="svg"&&this.setSvg(u)},i.prototype.setSize=function(u,a){u=Math.round(u),a=Math.round(a),this.isCanvas?this.setSizeCanvas(u,a):this.isSvg&&this.setSizeSvg(u,a)},i.prototype.setResize=function(u){this.resize=u,this.resizeListener||(this.resizeListener=this.onWindowResize.bind(this)),u?(window.addEventListener("resize",this.resizeListener),this.onWindowResize()):window.removeEventListener("resize",this.resizeListener)},i.prototype.onWindowResize=function(){this.setMeasuredSize(),this.onResize(this.width,this.height)},i.prototype.setMeasuredSize=function(){var u,a,l=this.resize=="fullscreen";if(l)u=window.innerWidth,a=window.innerHeight;else{var c=this.element.getBoundingClientRect();u=c.width,a=c.height}this.setSize(u,a)},i.prototype.renderGraph=function(u){this.isCanvas?this.renderGraphCanvas(u):this.isSvg&&this.renderGraphSvg(u)},i.prototype.updateRenderGraph=function(u){this.updateGraph(),this.renderGraph(u)},i.prototype.setCanvas=function(u){this.element=u,this.isCanvas=!0,this.ctx=this.element.getContext("2d"),this.setSizeCanvas(u.width,u.height)},i.prototype.setSizeCanvas=function(u,a){this.width=u,this.height=a;var l=this.pixelRatio=window.devicePixelRatio||1;this.element.width=this.canvasWidth=u*l,this.element.height=this.canvasHeight=a*l;var c=l>1&&!this.resize;c&&(this.element.style.width=u+"px",this.element.style.height=a+"px")},i.prototype.renderGraphCanvas=function(u){u=u||this,this.prerenderCanvas(),r.prototype.renderGraphCanvas.call(u,this.ctx),this.postrenderCanvas()},i.prototype.prerenderCanvas=function(){var u=this.ctx;if(u.lineCap="round",u.lineJoin="round",u.clearRect(0,0,this.canvasWidth,this.canvasHeight),u.save(),this.centered){var a=this.width/2*this.pixelRatio,l=this.height/2*this.pixelRatio;u.translate(a,l)}var c=this.pixelRatio*this.zoom;u.scale(c,c),this.onPrerender(u)},i.prototype.postrenderCanvas=function(){this.ctx.restore()},i.prototype.setSvg=function(u){this.element=u,this.isSvg=!0,this.pixelRatio=1;var a=u.getAttribute("width"),l=u.getAttribute("height");this.setSizeSvg(a,l)},i.prototype.setSizeSvg=function(u,a){this.width=u,this.height=a;var l=u/this.zoom,c=a/this.zoom,m=this.centered?-l/2:0,f=this.centered?-c/2:0;this.element.setAttribute("viewBox",m+" "+f+" "+l+" "+c),this.resize?(this.element.removeAttribute("width"),this.element.removeAttribute("height")):(this.element.setAttribute("width",u),this.element.setAttribute("height",a))},i.prototype.renderGraphSvg=function(u){u=u||this,h(this.element),this.onPrerender(this.element),r.prototype.renderGraphSvg.call(u,this.element)};function h(u){for(;u.firstChild;)u.removeChild(u.firstChild)}return i.prototype.setDragRotate=function(u){if(u)u===!0&&(u=this);else return;this.dragRotate=u,this.bindDrag(this.element)},i.prototype.dragStart=function(){this.dragStartRX=this.dragRotate.rotate.x,this.dragStartRY=this.dragRotate.rotate.y,t.prototype.dragStart.apply(this,arguments)},i.prototype.dragMove=function(u,a){var l=a.pageX-this.dragStartX,c=a.pageY-this.dragStartY,m=Math.min(this.width,this.height),f=l/m*s,p=c/m*s;this.dragRotate.rotate.x=this.dragStartRX-p,this.dragRotate.rotate.y=this.dragStartRY-f,t.prototype.dragMove.apply(this,arguments)},i})});var yt=O((Xr,_t)=>{(function(o,e){if(typeof _t=="object"&&_t.exports)_t.exports=e(ut());else{var r=o.Zdog;r.PathCommand=e(r.Vector)}})(Xr,function(e){function r(i,h,u){this.method=i,this.points=h.map(t),this.renderPoints=h.map(n),this.previousPoint=u,this.endRenderPoint=this.renderPoints[this.renderPoints.length-1],i=="arc"&&(this.controlPoints=[new e,new e])}function t(i){return i instanceof e?i:new e(i)}function n(i){return new e(i)}r.prototype.reset=function(){var i=this.points;this.renderPoints.forEach(function(h,u){var a=i[u];h.set(a)})},r.prototype.transform=function(i,h,u){this.renderPoints.forEach(function(a){a.transform(i,h,u)})},r.prototype.render=function(i,h,u){return this[this.method](i,h,u)},r.prototype.move=function(i,h,u){return u.move(i,h,this.renderPoints[0])},r.prototype.line=function(i,h,u){return u.line(i,h,this.renderPoints[0])},r.prototype.bezier=function(i,h,u){var a=this.renderPoints[0],l=this.renderPoints[1],c=this.renderPoints[2];return u.bezier(i,h,a,l,c)};var s=9/16;return r.prototype.arc=function(i,h,u){var a=this.previousPoint,l=this.renderPoints[0],c=this.renderPoints[1],m=this.controlPoints[0],f=this.controlPoints[1];return m.set(a).lerp(l,s),f.set(c).lerp(l,s),u.bezier(i,h,m,f,c)},r})});var et=O((Hr,Yt)=>{(function(o,e){if(typeof Yt=="object"&&Yt.exports)Yt.exports=e(Y(),ut(),yt(),tt());else{var r=o.Zdog;r.Shape=e(r,r.Vector,r.PathCommand,r.Anchor)}})(Hr,function(e,r,t,n){var s=n.subclass({stroke:1,fill:!1,color:"#333",closed:!0,visible:!0,path:[{}],front:{z:1},backface:!0});s.prototype.create=function(a){n.prototype.create.call(this,a),this.updatePath(),this.front=new r(a.front||this.front),this.renderFront=new r(this.front),this.renderNormal=new r};var i=["move","line","bezier","arc"];s.prototype.updatePath=function(){this.setPath(),this.updatePathCommands()},s.prototype.setPath=function(){},s.prototype.updatePathCommands=function(){var a;this.pathCommands=this.path.map(function(l,c){var m=Object.keys(l),f=m[0],p=l[f],d=m.length==1&&i.indexOf(f)!=-1;d||(f="line",p=l);var g=f=="line"||f=="move",w=Array.isArray(p);g&&!w&&(p=[p]),f=c===0?"move":f;var y=new t(f,p,a);return a=y.endRenderPoint,y})},s.prototype.reset=function(){this.renderOrigin.set(this.origin),this.renderFront.set(this.front),this.pathCommands.forEach(function(a){a.reset()})},s.prototype.transform=function(a,l,c){this.renderOrigin.transform(a,l,c),this.renderFront.transform(a,l,c),this.renderNormal.set(this.renderOrigin).subtract(this.renderFront),this.pathCommands.forEach(function(m){m.transform(a,l,c)}),this.children.forEach(function(m){m.transform(a,l,c)})},s.prototype.updateSortValue=function(){var a=this.pathCommands.length,l=this.pathCommands[0].endRenderPoint,c=this.pathCommands[a-1].endRenderPoint,m=a>2&&l.isSame(c);m&&(a-=1);for(var f=0,p=0;p<a;p++)f+=this.pathCommands[p].endRenderPoint.z;this.sortValue=f/a},s.prototype.render=function(a,l){var c=this.pathCommands.length;if(!(!this.visible||!c)&&(this.isFacingBack=this.renderNormal.z>0,!(!this.backface&&this.isFacingBack))){if(!l)throw new Error("Zdog renderer required. Set to "+l);var m=c==1;l.isCanvas&&m?this.renderCanvasDot(a,l):this.renderPath(a,l)}};var h=e.TAU;s.prototype.renderCanvasDot=function(a){var l=this.getLineWidth();if(!!l){a.fillStyle=this.getRenderColor();var c=this.pathCommands[0].endRenderPoint;a.beginPath();var m=l/2;a.arc(c.x,c.y,m,0,h),a.fill()}},s.prototype.getLineWidth=function(){return this.stroke?this.stroke==!0?1:this.stroke:0},s.prototype.getRenderColor=function(){var a=typeof this.backface=="string"&&this.isFacingBack,l=a?this.backface:this.color;return l},s.prototype.renderPath=function(a,l){var c=this.getRenderElement(a,l),m=this.pathCommands.length==2&&this.pathCommands[1].method=="line",f=!m&&this.closed,p=this.getRenderColor();l.renderPath(a,c,this.pathCommands,f),l.stroke(a,c,this.stroke,p,this.getLineWidth()),l.fill(a,c,this.fill,p),l.end(a,c)};var u="http://www.w3.org/2000/svg";return s.prototype.getRenderElement=function(a,l){if(!!l.isSvg)return this.svgElement||(this.svgElement=document.createElementNS(u,"path"),this.svgElement.setAttribute("stroke-linecap","round"),this.svgElement.setAttribute("stroke-linejoin","round")),this.svgElement},s})});var Ee=O((Kr,Xt)=>{(function(o,e){if(typeof Xt=="object"&&Xt.exports)Xt.exports=e(tt());else{var r=o.Zdog;r.Group=e(r.Anchor)}})(Kr,function(e){var r=e.subclass({updateSort:!1,visible:!0});return r.prototype.updateSortValue=function(){var t=0;this.flatGraph.forEach(function(n){n.updateSortValue(),t+=n.sortValue}),this.sortValue=t/this.flatGraph.length,this.updateSort&&this.flatGraph.sort(e.shapeSorter)},r.prototype.render=function(t,n){!this.visible||this.flatGraph.forEach(function(s){s.render(t,n)})},r.prototype.updateFlatGraph=function(){var t=[];this.flatGraph=this.addChildFlatGraph(t)},r.prototype.getFlatGraph=function(){return[this]},r})});var je=O((Qr,Ht)=>{(function(o,e){if(typeof Ht=="object"&&Ht.exports)Ht.exports=e(et());else{var r=o.Zdog;r.Rect=e(r.Shape)}})(Qr,function(e){var r=e.subclass({width:1,height:1});return r.prototype.setPath=function(){var t=this.width/2,n=this.height/2;this.path=[{x:-t,y:-n},{x:t,y:-n},{x:t,y:n},{x:-t,y:n}]},r})});var Jr=O((Ar,Kt)=>{(function(o,e){if(typeof Kt=="object"&&Kt.exports)Kt.exports=e(et());else{var r=o.Zdog;r.RoundedRect=e(r.Shape)}})(Ar,function(e){var r=e.subclass({width:1,height:1,cornerRadius:.25,closed:!1});return r.prototype.setPath=function(){var t=this.width/2,n=this.height/2,s=Math.min(t,n),i=Math.min(this.cornerRadius,s),h=t-i,u=n-i,a=[{x:h,y:-n},{arc:[{x:t,y:-n},{x:t,y:-u}]}];u&&a.push({x:t,y:u}),a.push({arc:[{x:t,y:n},{x:h,y:n}]}),h&&a.push({x:-h,y:n}),a.push({arc:[{x:-t,y:n},{x:-t,y:u}]}),u&&a.push({x:-t,y:-u}),a.push({arc:[{x:-t,y:-n},{x:-h,y:-n}]}),h&&a.push({x:h,y:-n}),this.path=a},r})});var vt=O((Zr,Qt)=>{(function(o,e){if(typeof Qt=="object"&&Qt.exports)Qt.exports=e(et());else{var r=o.Zdog;r.Ellipse=e(r.Shape)}})(Zr,function(e){var r=e.subclass({diameter:1,width:void 0,height:void 0,quarters:4,closed:!1});return r.prototype.setPath=function(){var t=this.width!=null?this.width:this.diameter,n=this.height!=null?this.height:this.diameter,s=t/2,i=n/2;this.path=[{x:0,y:-i},{arc:[{x:s,y:-i},{x:s,y:0}]}],this.quarters>1&&this.path.push({arc:[{x:s,y:i},{x:0,y:i}]}),this.quarters>2&&this.path.push({arc:[{x:-s,y:i},{x:-s,y:0}]}),this.quarters>3&&this.path.push({arc:[{x:-s,y:-i},{x:0,y:-i}]})},r})});var en=O((tn,At)=>{(function(o,e){if(typeof At=="object"&&At.exports)At.exports=e(Y(),et());else{var r=o.Zdog;r.Polygon=e(r,r.Shape)}})(tn,function(e,r){var t=r.subclass({sides:3,radius:.5}),n=e.TAU;return t.prototype.setPath=function(){this.path=[];for(var s=0;s<this.sides;s++){var i=s/this.sides*n-n/4,h=Math.cos(i)*this.radius,u=Math.sin(i)*this.radius;this.path.push({x:h,y:u})}},t})});var nn=O((rn,Jt)=>{(function(o,e){if(typeof Jt=="object"&&Jt.exports)Jt.exports=e(Y(),ut(),tt(),vt());else{var r=o.Zdog;r.Hemisphere=e(r,r.Vector,r.Anchor,r.Ellipse)}})(rn,function(e,r,t,n){var s=n.subclass({fill:!0}),i=e.TAU;s.prototype.create=function(){n.prototype.create.apply(this,arguments),this.apex=new t({addTo:this,translate:{z:this.diameter/2}}),this.renderCentroid=new r},s.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,3/8),this.sortValue=this.renderCentroid.z},s.prototype.render=function(u,a){this.renderDome(u,a),n.prototype.render.apply(this,arguments)},s.prototype.renderDome=function(u,a){if(!!this.visible){var l=this.getDomeRenderElement(u,a),c=Math.atan2(this.renderNormal.y,this.renderNormal.x),m=this.diameter/2*this.renderNormal.magnitude(),f=this.renderOrigin.x,p=this.renderOrigin.y;if(a.isCanvas){var d=c+i/4,g=c-i/4;u.beginPath(),u.arc(f,p,m,d,g)}else a.isSvg&&(c=(c-i/4)/i*360,this.domeSvgElement.setAttribute("d","M "+-m+",0 A "+m+","+m+" 0 0 1 "+m+",0"),this.domeSvgElement.setAttribute("transform","translate("+f+","+p+" ) rotate("+c+")"));a.stroke(u,l,this.stroke,this.color,this.getLineWidth()),a.fill(u,l,this.fill,this.color),a.end(u,l)}};var h="http://www.w3.org/2000/svg";return s.prototype.getDomeRenderElement=function(u,a){if(!!a.isSvg)return this.domeSvgElement||(this.domeSvgElement=document.createElementNS(h,"path"),this.domeSvgElement.setAttribute("stroke-linecap","round"),this.domeSvgElement.setAttribute("stroke-linejoin","round")),this.domeSvgElement},s})});var sn=O((on,Zt)=>{(function(o,e){if(typeof Zt=="object"&&Zt.exports)Zt.exports=e(Y(),yt(),et(),Ee(),vt());else{var r=o.Zdog;r.Cylinder=e(r,r.PathCommand,r.Shape,r.Group,r.Ellipse)}})(on,function(e,r,t,n,s){function i(){}var h=n.subclass({color:"#333",updateSort:!0});h.prototype.create=function(){n.prototype.create.apply(this,arguments),this.pathCommands=[new r("move",[{}]),new r("line",[{}])]},h.prototype.render=function(f,p){this.renderCylinderSurface(f,p),n.prototype.render.apply(this,arguments)},h.prototype.renderCylinderSurface=function(f,p){if(!!this.visible){var d=this.getRenderElement(f,p),g=this.frontBase,w=this.rearBase,y=g.renderNormal.magnitude(),M=g.diameter*y+g.getLineWidth();this.pathCommands[0].renderPoints[0].set(g.renderOrigin),this.pathCommands[1].renderPoints[0].set(w.renderOrigin),p.isCanvas&&(f.lineCap="butt"),p.renderPath(f,d,this.pathCommands),p.stroke(f,d,!0,this.color,M),p.end(f,d),p.isCanvas&&(f.lineCap="round")}};var u="http://www.w3.org/2000/svg";h.prototype.getRenderElement=function(f,p){if(!!p.isSvg)return this.svgElement||(this.svgElement=document.createElementNS(u,"path")),this.svgElement},h.prototype.copyGraph=i;var a=s.subclass();a.prototype.copyGraph=i;var l=t.subclass({diameter:1,length:1,frontFace:void 0,fill:!0}),c=e.TAU;l.prototype.create=function(){t.prototype.create.apply(this,arguments),this.group=new h({addTo:this,color:this.color,visible:this.visible});var f=this.length/2,p=this.backface||!0;this.frontBase=this.group.frontBase=new s({addTo:this.group,diameter:this.diameter,translate:{z:f},rotate:{y:c/2},color:this.color,stroke:this.stroke,fill:this.fill,backface:this.frontFace||p,visible:this.visible}),this.rearBase=this.group.rearBase=this.frontBase.copy({translate:{z:-f},rotate:{y:0},backface:p})},l.prototype.render=function(){};var m=["stroke","fill","color","visible"];return m.forEach(function(f){var p="_"+f;Object.defineProperty(l.prototype,f,{get:function(){return this[p]},set:function(d){this[p]=d,this.frontBase&&(this.frontBase[f]=d,this.rearBase[f]=d,this.group[f]=d)}})}),l})});var un=O((hn,te)=>{(function(o,e){if(typeof te=="object"&&te.exports)te.exports=e(Y(),ut(),yt(),tt(),vt());else{var r=o.Zdog;r.Cone=e(r,r.Vector,r.PathCommand,r.Anchor,r.Ellipse)}})(hn,function(e,r,t,n,s){var i=s.subclass({length:1,fill:!0}),h=e.TAU;i.prototype.create=function(){s.prototype.create.apply(this,arguments),this.apex=new n({addTo:this,translate:{z:this.length}}),this.renderApex=new r,this.renderCentroid=new r,this.tangentA=new r,this.tangentB=new r,this.surfacePathCommands=[new t("move",[{}]),new t("line",[{}]),new t("line",[{}])]},i.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,1/3),this.sortValue=this.renderCentroid.z},i.prototype.render=function(a,l){this.renderConeSurface(a,l),s.prototype.render.apply(this,arguments)},i.prototype.renderConeSurface=function(a,l){if(!!this.visible){this.renderApex.set(this.apex.renderOrigin).subtract(this.renderOrigin);var c=this.renderNormal.magnitude(),m=this.renderApex.magnitude2d(),f=this.renderNormal.magnitude2d(),p=Math.acos(f/c),d=Math.sin(p),g=this.diameter/2*c,w=g*d<m;if(!!w){var y=Math.atan2(this.renderNormal.y,this.renderNormal.x)+h/2,M=m/d,S=Math.acos(g/M),v=this.tangentA,b=this.tangentB;v.x=Math.cos(S)*g*d,v.y=Math.sin(S)*g,b.set(this.tangentA),b.y*=-1,v.rotateZ(y),b.rotateZ(y),v.add(this.renderOrigin),b.add(this.renderOrigin),this.setSurfaceRenderPoint(0,v),this.setSurfaceRenderPoint(1,this.apex.renderOrigin),this.setSurfaceRenderPoint(2,b);var j=this.getSurfaceRenderElement(a,l);l.renderPath(a,j,this.surfacePathCommands),l.stroke(a,j,this.stroke,this.color,this.getLineWidth()),l.fill(a,j,this.fill,this.color),l.end(a,j)}}};var u="http://www.w3.org/2000/svg";return i.prototype.getSurfaceRenderElement=function(a,l){if(!!l.isSvg)return this.surfaceSvgElement||(this.surfaceSvgElement=document.createElementNS(u,"path"),this.surfaceSvgElement.setAttribute("stroke-linecap","round"),this.surfaceSvgElement.setAttribute("stroke-linejoin","round")),this.surfaceSvgElement},i.prototype.setSurfaceRenderPoint=function(a,l){var c=this.surfacePathCommands[a].renderPoints[0];c.set(l)},i})});var ln=O((an,ee)=>{(function(o,e){if(typeof ee=="object"&&ee.exports)ee.exports=e(Y(),tt(),et(),je());else{var r=o.Zdog;r.Box=e(r,r.Anchor,r.Shape,r.Rect)}})(an,function(e,r,t,n){var s=n.subclass();s.prototype.copyGraph=function(){};var i=e.TAU,h=["frontFace","rearFace","leftFace","rightFace","topFace","bottomFace"],u=e.extend({},t.defaults);delete u.path,h.forEach(function(c){u[c]=!0}),e.extend(u,{width:1,height:1,depth:1,fill:!0});var a=r.subclass(u);a.prototype.create=function(c){r.prototype.create.call(this,c),this.updatePath(),this.fill=this.fill},a.prototype.updatePath=function(){h.forEach(function(c){this[c]=this[c]},this)},h.forEach(function(c){var m="_"+c;Object.defineProperty(a.prototype,c,{get:function(){return this[m]},set:function(f){this[m]=f,this.setFace(c,f)}})}),a.prototype.setFace=function(c,m){var f=c+"Rect",p=this[f];if(!m){this.removeChild(p);return}var d=this.getFaceOptions(c);d.color=typeof m=="string"?m:this.color,p?p.setOptions(d):p=this[f]=new s(d),p.updatePath(),this.addChild(p)},a.prototype.getFaceOptions=function(c){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/2}},rearFace:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:i/2}},leftFace:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-i/4}},rightFace:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:i/4}},topFace:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-i/4}},bottomFace:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:i/4}}}[c]};var l=["color","stroke","fill","backface","front","visible"];return l.forEach(function(c){var m="_"+c;Object.defineProperty(a.prototype,c,{get:function(){return this[m]},set:function(f){this[m]=f,h.forEach(function(p){var d=this[p+"Rect"],g=typeof this[p]=="string",w=c=="color"&&g;d&&!w&&(d[c]=f)},this)}})}),a})});var fn=O((cn,re)=>{(function(o,e){typeof re=="object"&&re.exports?re.exports=e(Y(),ke(),be(),ut(),tt(),xe(),Yr(),yt(),et(),Ee(),je(),Jr(),vt(),en(),nn(),sn(),un(),ln()):typeof define=="function"&&define.amd&&define("zdog",[],o.Zdog)})(cn,function(e,r,t,n,s,i,h,u,a,l,c,m,f,p,d,g,w,y){return e.CanvasRenderer=r,e.SvgRenderer=t,e.Vector=n,e.Anchor=s,e.Dragger=i,e.Illustration=h,e.PathCommand=u,e.Shape=a,e.Group=l,e.Rect=c,e.RoundedRect=m,e.Ellipse=f,e.Polygon=p,e.Hemisphere=d,e.Cylinder=g,e.Cone=w,e.Box=y,e})});function ue(o,e,r){if(o&&o.length){let[t,n]=e,s=Math.PI/180*r,i=Math.cos(s),h=Math.sin(s);o.forEach(u=>{let[a,l]=u;u[0]=(a-t)*i-(l-n)*h+t,u[1]=(a-t)*h+(l-n)*i+n})}}function kt(o){let e=o[0],r=o[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function ct(o,e){let r=e.hachureAngle+90,t=e.hachureGap;t<0&&(t=4*e.strokeWidth),t=Math.max(t,.1);let n=[0,0];if(r)for(let i of o)ue(i,n,r);let s=function(i,h){let u=[];for(let f of i){let p=[...f];p[0].join(",")!==p[p.length-1].join(",")&&p.push([p[0][0],p[0][1]]),p.length>2&&u.push(p)}let a=[];h=Math.max(h,.1);let l=[];for(let f of u)for(let p=0;p<f.length-1;p++){let d=f[p],g=f[p+1];if(d[1]!==g[1]){let w=Math.min(d[1],g[1]);l.push({ymin:w,ymax:Math.max(d[1],g[1]),x:w===d[1]?d[0]:g[0],islope:(g[0]-d[0])/(g[1]-d[1])})}}if(l.sort((f,p)=>f.ymin<p.ymin?-1:f.ymin>p.ymin?1:f.x<p.x?-1:f.x>p.x?1:f.ymax===p.ymax?0:(f.ymax-p.ymax)/Math.abs(f.ymax-p.ymax)),!l.length)return a;let c=[],m=l[0].ymin;for(;c.length||l.length;){if(l.length){let f=-1;for(let p=0;p<l.length&&!(l[p].ymin>m);p++)f=p;l.splice(0,f+1).forEach(p=>{c.push({s:m,edge:p})})}if(c=c.filter(f=>!(f.edge.ymax<=m)),c.sort((f,p)=>f.edge.x===p.edge.x?0:(f.edge.x-p.edge.x)/Math.abs(f.edge.x-p.edge.x)),c.length>1)for(let f=0;f<c.length;f+=2){let p=f+1;if(p>=c.length)break;let d=c[f].edge,g=c[p].edge;a.push([[Math.round(d.x),m],[Math.round(g.x),m]])}m+=h,c.forEach(f=>{f.edge.x=f.edge.x+h*f.edge.islope})}return a}(o,t);if(r){for(let i of o)ue(i,n,-r);(function(i,h,u){let a=[];i.forEach(l=>a.push(...l)),ue(a,h,u)})(s,n,-r)}return s}var bt=class{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){let t=ct(e,r);return{type:"fillSketch",ops:this.renderLines(t,r)}}renderLines(e,r){let t=[];for(let n of e)t.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],r));return t}},Fe=class extends bt{fillPolygons(e,r){let t=r.hachureGap;t<0&&(t=4*r.strokeWidth),t=Math.max(t,.1);let n=ct(e,Object.assign({},r,{hachureGap:t})),s=Math.PI/180*r.hachureAngle,i=[],h=.5*t*Math.cos(s),u=.5*t*Math.sin(s);for(let[a,l]of n)kt([a,l])&&i.push([[a[0]-h,a[1]+u],[...l]],[[a[0]+h,a[1]-u],[...l]]);return{type:"fillSketch",ops:this.renderLines(i,r)}}},Ge=class extends bt{fillPolygons(e,r){let t=this._fillPolygons(e,r),n=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(e,n);return t.ops=t.ops.concat(s.ops),t}},Be=class{constructor(e){this.helper=e}fillPolygons(e,r){let t=ct(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(t,r)}dotsOnLines(e,r){let t=[],n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);let i=n/4;for(let h of e){let u=kt(h),a=u/n,l=Math.ceil(a)-1,c=u-l*n,m=(h[0][0]+h[1][0])/2-n/4,f=Math.min(h[0][1],h[1][1]);for(let p=0;p<l;p++){let d=f+c+p*n,g=m-i+2*Math.random()*i,w=d-i+2*Math.random()*i,y=this.helper.ellipse(g,w,s,s,r);t.push(...y.ops)}}return{type:"fillSketch",ops:t}}},$e=class{constructor(e){this.helper=e}fillPolygons(e,r){let t=ct(e,r);return{type:"fillSketch",ops:this.dashedLine(t,r)}}dashedLine(e,r){let t=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,n=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return e.forEach(i=>{let h=kt(i),u=Math.floor(h/(t+n)),a=(h+n-u*(t+n))/2,l=i[0],c=i[1];l[0]>c[0]&&(l=i[1],c=i[0]);let m=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let f=0;f<u;f++){let p=f*(t+n),d=p+t,g=[l[0]+p*Math.cos(m)+a*Math.cos(m),l[1]+p*Math.sin(m)+a*Math.sin(m)],w=[l[0]+d*Math.cos(m)+a*Math.cos(m),l[1]+d*Math.sin(m)+a*Math.sin(m)];s.push(...this.helper.doubleLineOps(g[0],g[1],w[0],w[1],r))}}),s}},Ve=class{constructor(e){this.helper=e}fillPolygons(e,r){let t=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,n=r.zigzagOffset<0?t:r.zigzagOffset,s=ct(e,r=Object.assign({},r,{hachureGap:t+n}));return{type:"fillSketch",ops:this.zigzagLines(s,n,r)}}zigzagLines(e,r,t){let n=[];return e.forEach(s=>{let i=kt(s),h=Math.round(i/(2*r)),u=s[0],a=s[1];u[0]>a[0]&&(u=s[1],a=s[0]);let l=Math.atan((a[1]-u[1])/(a[0]-u[0]));for(let c=0;c<h;c++){let m=2*c*r,f=2*(c+1)*r,p=Math.sqrt(2*Math.pow(r,2)),d=[u[0]+m*Math.cos(l),u[1]+m*Math.sin(l)],g=[u[0]+f*Math.cos(l),u[1]+f*Math.sin(l)],w=[d[0]+p*Math.cos(l+Math.PI/4),d[1]+p*Math.sin(l+Math.PI/4)];n.push(...this.helper.doubleLineOps(d[0],d[1],w[0],w[1],t),...this.helper.doubleLineOps(w[0],w[1],g[0],g[1],t))}}),n}},$={},Ne=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},xt={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ae(o,e){return o.type===e}function le(o){let e=[],r=function(i){let h=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))h[h.length]={type:0,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];h[h.length]={type:1,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return h[h.length]={type:2,text:""},h}(o),t="BOD",n=0,s=r[n];for(;!ae(s,2);){let i=0,h=[];if(t==="BOD"){if(s.text!=="M"&&s.text!=="m")return le("M0,0"+o);n++,i=xt[s.text],t=s.text}else ae(s,1)?i=xt[t]:(n++,i=xt[s.text],t=s.text);if(!(n+i<r.length))throw new Error("Path data ended short");for(let u=n;u<n+i;u++){let a=r[u];if(!ae(a,1))throw new Error("Param not a number: "+t+","+a.text);h[h.length]=+a.text}if(typeof xt[t]!="number")throw new Error("Bad segment: "+t);{let u={key:t,data:h};e.push(u),n+=i,s=r[n],t==="M"&&(t="L"),t==="m"&&(t="l")}}return e}function We(o){let e=0,r=0,t=0,n=0,s=[];for(let{key:i,data:h}of o)switch(i){case"M":s.push({key:"M",data:[...h]}),[e,r]=h,[t,n]=h;break;case"m":e+=h[0],r+=h[1],s.push({key:"M",data:[e,r]}),t=e,n=r;break;case"L":s.push({key:"L",data:[...h]}),[e,r]=h;break;case"l":e+=h[0],r+=h[1],s.push({key:"L",data:[e,r]});break;case"C":s.push({key:"C",data:[...h]}),e=h[4],r=h[5];break;case"c":{let u=h.map((a,l)=>l%2?a+r:a+e);s.push({key:"C",data:u}),e=u[4],r=u[5];break}case"Q":s.push({key:"Q",data:[...h]}),e=h[2],r=h[3];break;case"q":{let u=h.map((a,l)=>l%2?a+r:a+e);s.push({key:"Q",data:u}),e=u[2],r=u[3];break}case"A":s.push({key:"A",data:[...h]}),e=h[5],r=h[6];break;case"a":e+=h[5],r+=h[6],s.push({key:"A",data:[h[0],h[1],h[2],h[3],h[4],e,r]});break;case"H":s.push({key:"H",data:[...h]}),e=h[0];break;case"h":e+=h[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...h]}),r=h[0];break;case"v":r+=h[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...h]}),e=h[2],r=h[3];break;case"s":{let u=h.map((a,l)=>l%2?a+r:a+e);s.push({key:"S",data:u}),e=u[2],r=u[3];break}case"T":s.push({key:"T",data:[...h]}),e=h[0],r=h[1];break;case"t":e+=h[0],r+=h[1],s.push({key:"T",data:[e,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=t,r=n}return s}function Ue(o){let e=[],r="",t=0,n=0,s=0,i=0,h=0,u=0;for(let{key:a,data:l}of o){switch(a){case"M":e.push({key:"M",data:[...l]}),[t,n]=l,[s,i]=l;break;case"C":e.push({key:"C",data:[...l]}),t=l[4],n=l[5],h=l[2],u=l[3];break;case"L":e.push({key:"L",data:[...l]}),[t,n]=l;break;case"H":t=l[0],e.push({key:"L",data:[t,n]});break;case"V":n=l[0],e.push({key:"L",data:[t,n]});break;case"S":{let c=0,m=0;r==="C"||r==="S"?(c=t+(t-h),m=n+(n-u)):(c=t,m=n),e.push({key:"C",data:[c,m,...l]}),h=l[0],u=l[1],t=l[2],n=l[3];break}case"T":{let[c,m]=l,f=0,p=0;r==="Q"||r==="T"?(f=t+(t-h),p=n+(n-u)):(f=t,p=n);let d=t+2*(f-t)/3,g=n+2*(p-n)/3,w=c+2*(f-c)/3,y=m+2*(p-m)/3;e.push({key:"C",data:[d,g,w,y,c,m]}),h=f,u=p,t=c,n=m;break}case"Q":{let[c,m,f,p]=l,d=t+2*(c-t)/3,g=n+2*(m-n)/3,w=f+2*(c-f)/3,y=p+2*(m-p)/3;e.push({key:"C",data:[d,g,w,y,f,p]}),h=c,u=m,t=f,n=p;break}case"A":{let c=Math.abs(l[0]),m=Math.abs(l[1]),f=l[2],p=l[3],d=l[4],g=l[5],w=l[6];c===0||m===0?(e.push({key:"C",data:[t,n,g,w,g,w]}),t=g,n=w):(t!==g||n!==w)&&(_e(t,n,g,w,c,m,f,p,d).forEach(function(y){e.push({key:"C",data:y})}),t=g,n=w);break}case"Z":e.push({key:"Z",data:[]}),t=s,n=i}r=a}return e}function ft(o,e,r){return[o*Math.cos(r)-e*Math.sin(r),o*Math.sin(r)+e*Math.cos(r)]}function _e(o,e,r,t,n,s,i,h,u,a){let l=(c=i,Math.PI*c/180);var c;let m=[],f=0,p=0,d=0,g=0;if(a)[f,p,d,g]=a;else{[o,e]=ft(o,e,-l),[r,t]=ft(r,t,-l);let I=(o-r)/2,T=(e-t)/2,B=I*I/(n*n)+T*T/(s*s);B>1&&(B=Math.sqrt(B),n*=B,s*=B);let D=n*n,U=s*s,_=D*U-D*T*T-U*I*I,J=D*T*T+U*I*I,G=(h===u?-1:1)*Math.sqrt(Math.abs(_/J));d=G*n*T/s+(o+r)/2,g=G*-s*I/n+(e+t)/2,f=Math.asin(parseFloat(((e-g)/s).toFixed(9))),p=Math.asin(parseFloat(((t-g)/s).toFixed(9))),o<d&&(f=Math.PI-f),r<d&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),u&&f>p&&(f-=2*Math.PI),!u&&p>f&&(p-=2*Math.PI)}let w=p-f;if(Math.abs(w)>120*Math.PI/180){let I=p,T=r,B=t;p=u&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,m=_e(r=d+n*Math.cos(p),t=g+s*Math.sin(p),T,B,n,s,i,0,u,[p,I,d,g])}w=p-f;let y=Math.cos(f),M=Math.sin(f),S=Math.cos(p),v=Math.sin(p),b=Math.tan(w/4),j=4/3*n*b,R=4/3*s*b,z=[o,e],P=[o+j*M,e-R*y],L=[r+j*v,t-R*S],A=[r,t];if(P[0]=2*z[0]-P[0],P[1]=2*z[1]-P[1],a)return[P,L,A].concat(m);{m=[P,L,A].concat(m);let I=[];for(let T=0;T<m.length;T+=3){let B=ft(m[T][0],m[T][1],l),D=ft(m[T+1][0],m[T+1][1],l),U=ft(m[T+2][0],m[T+2][1],l);I.push([B[0],B[1],D[0],D[1],U[0],U[1]])}return I}}var Yn={randOffset:function(o,e){return k(o,e)},randOffsetWithRange:function(o,e,r){return Pt(o,e,r)},ellipse:function(o,e,r,t,n){let s=Xe(r,t,n);return ce(o,e,n,s).opset},doubleLineOps:function(o,e,r,t,n){return H(o,e,r,t,n,!0)}};function Ye(o,e,r,t,n){return{type:"path",ops:H(o,e,r,t,n)}}function Et(o,e,r){let t=(o||[]).length;if(t>2){let n=[];for(let s=0;s<t-1;s++)n.push(...H(o[s][0],o[s][1],o[s+1][0],o[s+1][1],r));return e&&n.push(...H(o[t-1][0],o[t-1][1],o[0][0],o[0][1],r)),{type:"path",ops:n}}return t===2?Ye(o[0][0],o[0][1],o[1][0],o[1][1],r):{type:"path",ops:[]}}function Xn(o,e,r,t,n){return function(s,i){return Et(s,!0,i)}([[o,e],[o+r,e],[o+r,e+t],[o,e+t]],n)}function Hn(o,e){let r=Ae(o,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){let t=Ae(o,1.5*(1+.22*e.roughness),function(n){let s=Object.assign({},n);return s.randomizer=void 0,n.seed&&(s.seed=n.seed+1),s}(e));r=r.concat(t)}return{type:"path",ops:r}}function Xe(o,e,r){let t=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(e/2,2))/2)),n=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*t)),s=2*Math.PI/n,i=Math.abs(o/2),h=Math.abs(e/2),u=1-r.curveFitting;return i+=k(i*u,r),h+=k(h*u,r),{increment:s,rx:i,ry:h}}function ce(o,e,r,t){let[n,s]=Je(t.increment,o,e,t.rx,t.ry,1,t.increment*Pt(.1,Pt(.4,1,r),r),r),i=Rt(n,null,r);if(!r.disableMultiStroke&&r.roughness!==0){let[h]=Je(t.increment,o,e,t.rx,t.ry,1.5,0,r),u=Rt(h,null,r);i=i.concat(u)}return{estimatedPoints:s,opset:{type:"path",ops:i}}}function He(o,e,r,t,n,s,i,h,u){let a=o,l=e,c=Math.abs(r/2),m=Math.abs(t/2);c+=k(.01*c,u),m+=k(.01*m,u);let f=n,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);let d=2*Math.PI/u.curveStepCount,g=Math.min(d/2,(p-f)/2),w=Ze(g,a,l,c,m,f,p,1,u);if(!u.disableMultiStroke){let y=Ze(g,a,l,c,m,f,p,1.5,u);w.push(...y)}return i&&(h?w.push(...H(a,l,a+c*Math.cos(f),l+m*Math.sin(f),u),...H(a,l,a+c*Math.cos(p),l+m*Math.sin(p),u)):w.push({op:"lineTo",data:[a,l]},{op:"lineTo",data:[a+c*Math.cos(f),l+m*Math.sin(f)]})),{type:"path",ops:w}}function jt(o,e){let r=[];for(let t of o)if(t.length){let n=e.maxRandomnessOffset||0,s=t.length;if(s>2){r.push({op:"move",data:[t[0][0]+k(n,e),t[0][1]+k(n,e)]});for(let i=1;i<s;i++)r.push({op:"lineTo",data:[t[i][0]+k(n,e),t[i][1]+k(n,e)]})}}return{type:"fillPath",ops:r}}function lt(o,e){return function(r,t){let n=r.fillStyle||"hachure";if(!$[n])switch(n){case"zigzag":$[n]||($[n]=new Fe(t));break;case"cross-hatch":$[n]||($[n]=new Ge(t));break;case"dots":$[n]||($[n]=new Be(t));break;case"dashed":$[n]||($[n]=new $e(t));break;case"zigzag-line":$[n]||($[n]=new Ve(t));break;case"hachure":default:n="hachure",$[n]||($[n]=new bt(t))}return $[n]}(e,Yn).fillPolygons(o,e)}function Ke(o){return o.randomizer||(o.randomizer=new Ne(o.seed||0)),o.randomizer.next()}function Pt(o,e,r,t=1){return r.roughness*t*(Ke(r)*(e-o)+o)}function k(o,e,r=1){return Pt(-o,o,e,r)}function H(o,e,r,t,n,s=!1){let i=s?n.disableMultiStrokeFill:n.disableMultiStroke,h=Qe(o,e,r,t,n,!0,!1);if(i)return h;let u=Qe(o,e,r,t,n,!0,!0);return h.concat(u)}function Qe(o,e,r,t,n,s,i){let h=Math.pow(o-r,2)+Math.pow(e-t,2),u=Math.sqrt(h),a=1;a=u<200?1:u>500?.4:-.0016668*u+1.233334;let l=n.maxRandomnessOffset||0;l*l*100>h&&(l=u/10);let c=l/2,m=.2+.2*Ke(n),f=n.bowing*n.maxRandomnessOffset*(t-e)/200,p=n.bowing*n.maxRandomnessOffset*(o-r)/200;f=k(f,n,a),p=k(p,n,a);let d=[],g=()=>k(c,n,a),w=()=>k(l,n,a),y=n.preserveVertices;return s&&(i?d.push({op:"move",data:[o+(y?0:g()),e+(y?0:g())]}):d.push({op:"move",data:[o+(y?0:k(l,n,a)),e+(y?0:k(l,n,a))]})),i?d.push({op:"bcurveTo",data:[f+o+(r-o)*m+g(),p+e+(t-e)*m+g(),f+o+2*(r-o)*m+g(),p+e+2*(t-e)*m+g(),r+(y?0:g()),t+(y?0:g())]}):d.push({op:"bcurveTo",data:[f+o+(r-o)*m+w(),p+e+(t-e)*m+w(),f+o+2*(r-o)*m+w(),p+e+2*(t-e)*m+w(),r+(y?0:w()),t+(y?0:w())]}),d}function Ae(o,e,r){let t=[];t.push([o[0][0]+k(e,r),o[0][1]+k(e,r)]),t.push([o[0][0]+k(e,r),o[0][1]+k(e,r)]);for(let n=1;n<o.length;n++)t.push([o[n][0]+k(e,r),o[n][1]+k(e,r)]),n===o.length-1&&t.push([o[n][0]+k(e,r),o[n][1]+k(e,r)]);return Rt(t,null,r)}function Rt(o,e,r){let t=o.length,n=[];if(t>3){let s=[],i=1-r.curveTightness;n.push({op:"move",data:[o[1][0],o[1][1]]});for(let h=1;h+2<t;h++){let u=o[h];s[0]=[u[0],u[1]],s[1]=[u[0]+(i*o[h+1][0]-i*o[h-1][0])/6,u[1]+(i*o[h+1][1]-i*o[h-1][1])/6],s[2]=[o[h+1][0]+(i*o[h][0]-i*o[h+2][0])/6,o[h+1][1]+(i*o[h][1]-i*o[h+2][1])/6],s[3]=[o[h+1][0],o[h+1][1]],n.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}if(e&&e.length===2){let h=r.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+k(h,r),e[1]+k(h,r)]})}}else t===3?(n.push({op:"move",data:[o[1][0],o[1][1]]}),n.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[2][0],o[2][1]]})):t===2&&n.push(...H(o[0][0],o[0][1],o[1][0],o[1][1],r));return n}function Je(o,e,r,t,n,s,i,h){let u=[],a=[];if(h.roughness===0){o/=4,a.push([e+t*Math.cos(-o),r+n*Math.sin(-o)]);for(let l=0;l<=2*Math.PI;l+=o){let c=[e+t*Math.cos(l),r+n*Math.sin(l)];u.push(c),a.push(c)}a.push([e+t*Math.cos(0),r+n*Math.sin(0)]),a.push([e+t*Math.cos(o),r+n*Math.sin(o)])}else{let l=k(.5,h)-Math.PI/2;a.push([k(s,h)+e+.9*t*Math.cos(l-o),k(s,h)+r+.9*n*Math.sin(l-o)]);let c=2*Math.PI+l-.01;for(let m=l;m<c;m+=o){let f=[k(s,h)+e+t*Math.cos(m),k(s,h)+r+n*Math.sin(m)];u.push(f),a.push(f)}a.push([k(s,h)+e+t*Math.cos(l+2*Math.PI+.5*i),k(s,h)+r+n*Math.sin(l+2*Math.PI+.5*i)]),a.push([k(s,h)+e+.98*t*Math.cos(l+i),k(s,h)+r+.98*n*Math.sin(l+i)]),a.push([k(s,h)+e+.9*t*Math.cos(l+.5*i),k(s,h)+r+.9*n*Math.sin(l+.5*i)])}return[a,u]}function Ze(o,e,r,t,n,s,i,h,u){let a=s+k(.1,u),l=[];l.push([k(h,u)+e+.9*t*Math.cos(a-o),k(h,u)+r+.9*n*Math.sin(a-o)]);for(let c=a;c<=i;c+=o)l.push([k(h,u)+e+t*Math.cos(c),k(h,u)+r+n*Math.sin(c)]);return l.push([e+t*Math.cos(i),r+n*Math.sin(i)]),l.push([e+t*Math.cos(i),r+n*Math.sin(i)]),Rt(l,null,u)}function Kn(o,e,r,t,n,s,i,h){let u=[],a=[h.maxRandomnessOffset||1,(h.maxRandomnessOffset||1)+.3],l=[0,0],c=h.disableMultiStroke?1:2,m=h.preserveVertices;for(let f=0;f<c;f++)f===0?u.push({op:"move",data:[i[0],i[1]]}):u.push({op:"move",data:[i[0]+(m?0:k(a[0],h)),i[1]+(m?0:k(a[0],h))]}),l=m?[n,s]:[n+k(a[f],h),s+k(a[f],h)],u.push({op:"bcurveTo",data:[o+k(a[f],h),e+k(a[f],h),r+k(a[f],h),t+k(a[f],h),l[0],l[1]]});return u}function pt(o){return[...o]}function Ct(o,e){return Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2)}function Qn(o,e,r){let t=Ct(e,r);if(t===0)return Ct(o,e);let n=((o[0]-e[0])*(r[0]-e[0])+(o[1]-e[1])*(r[1]-e[1]))/t;return n=Math.max(0,Math.min(1,n)),Ct(o,rt(e,r,n))}function rt(o,e,r){return[o[0]+(e[0]-o[0])*r,o[1]+(e[1]-o[1])*r]}function fe(o,e,r,t){let n=t||[];if(function(h,u){let a=h[u+0],l=h[u+1],c=h[u+2],m=h[u+3],f=3*l[0]-2*a[0]-m[0];f*=f;let p=3*l[1]-2*a[1]-m[1];p*=p;let d=3*c[0]-2*m[0]-a[0];d*=d;let g=3*c[1]-2*m[1]-a[1];return g*=g,f<d&&(f=d),p<g&&(p=g),f+p}(o,e)<r){let h=o[e+0];n.length?(s=n[n.length-1],i=h,Math.sqrt(Ct(s,i))>1&&n.push(h)):n.push(h),n.push(o[e+3])}else{let h=.5,u=o[e+0],a=o[e+1],l=o[e+2],c=o[e+3],m=rt(u,a,h),f=rt(a,l,h),p=rt(l,c,h),d=rt(m,f,h),g=rt(f,p,h),w=rt(d,g,h);fe([u,m,d,w],0,r,n),fe([w,g,p,c],0,r,n)}var s,i;return n}function An(o,e){return zt(o,0,o.length,e)}function zt(o,e,r,t,n){let s=n||[],i=o[e],h=o[r-1],u=0,a=1;for(let l=e+1;l<r-1;++l){let c=Qn(o[l],i,h);c>u&&(u=c,a=l)}return Math.sqrt(u)>t?(zt(o,e,a+1,t,s),zt(o,a,r,t,s)):(s.length||s.push(i),s.push(h)),s}function tr(o,e=.15,r){let t=[],n=(o.length-1)/3;for(let s=0;s<n;s++)fe(o,3*s,e,t);return r&&r>0?zt(t,0,t.length,r):t}var V="none",dt=class{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,t){return{shape:e,sets:r||[],options:t||this.defaultOptions}}line(e,r,t,n,s){let i=this._o(s);return this._d("line",[Ye(e,r,t,n,i)],i)}rectangle(e,r,t,n,s){let i=this._o(s),h=[],u=Xn(e,r,t,n,i);if(i.fill){let a=[[e,r],[e+t,r],[e+t,r+n],[e,r+n]];i.fillStyle==="solid"?h.push(jt([a],i)):h.push(lt([a],i))}return i.stroke!==V&&h.push(u),this._d("rectangle",h,i)}ellipse(e,r,t,n,s){let i=this._o(s),h=[],u=Xe(t,n,i),a=ce(e,r,i,u);if(i.fill)if(i.fillStyle==="solid"){let l=ce(e,r,i,u).opset;l.type="fillPath",h.push(l)}else h.push(lt([a.estimatedPoints],i));return i.stroke!==V&&h.push(a.opset),this._d("ellipse",h,i)}circle(e,r,t,n){let s=this.ellipse(e,r,t,t,n);return s.shape="circle",s}linearPath(e,r){let t=this._o(r);return this._d("linearPath",[Et(e,!1,t)],t)}arc(e,r,t,n,s,i,h=!1,u){let a=this._o(u),l=[],c=He(e,r,t,n,s,i,h,!0,a);if(h&&a.fill)if(a.fillStyle==="solid"){let m=Object.assign({},a);m.disableMultiStroke=!0;let f=He(e,r,t,n,s,i,!0,!1,m);f.type="fillPath",l.push(f)}else l.push(function(m,f,p,d,g,w,y){let M=m,S=f,v=Math.abs(p/2),b=Math.abs(d/2);v+=k(.01*v,y),b+=k(.01*b,y);let j=g,R=w;for(;j<0;)j+=2*Math.PI,R+=2*Math.PI;R-j>2*Math.PI&&(j=0,R=2*Math.PI);let z=(R-j)/y.curveStepCount,P=[];for(let L=j;L<=R;L+=z)P.push([M+v*Math.cos(L),S+b*Math.sin(L)]);return P.push([M+v*Math.cos(R),S+b*Math.sin(R)]),P.push([M,S]),lt([P],y)}(e,r,t,n,s,i,a));return a.stroke!==V&&l.push(c),this._d("arc",l,a)}curve(e,r){let t=this._o(r),n=[],s=Hn(e,t);if(t.fill&&t.fill!==V&&e.length>=3){let i=tr(function(h,u=0){let a=h.length;if(a<3)throw new Error("A curve must have at least three points.");let l=[];if(a===3)l.push(pt(h[0]),pt(h[1]),pt(h[2]),pt(h[2]));else{let c=[];c.push(h[0],h[0]);for(let p=1;p<h.length;p++)c.push(h[p]),p===h.length-1&&c.push(h[p]);let m=[],f=1-u;l.push(pt(c[0]));for(let p=1;p+2<c.length;p++){let d=c[p];m[0]=[d[0],d[1]],m[1]=[d[0]+(f*c[p+1][0]-f*c[p-1][0])/6,d[1]+(f*c[p+1][1]-f*c[p-1][1])/6],m[2]=[c[p+1][0]+(f*c[p][0]-f*c[p+2][0])/6,c[p+1][1]+(f*c[p][1]-f*c[p+2][1])/6],m[3]=[c[p+1][0],c[p+1][1]],l.push(m[1],m[2],m[3])}}return l}(e),10,(1+t.roughness)/2);t.fillStyle==="solid"?n.push(jt([i],t)):n.push(lt([i],t))}return t.stroke!==V&&n.push(s),this._d("curve",n,t)}polygon(e,r){let t=this._o(r),n=[],s=Et(e,!0,t);return t.fill&&(t.fillStyle==="solid"?n.push(jt([e],t)):n.push(lt([e],t))),t.stroke!==V&&n.push(s),this._d("polygon",n,t)}path(e,r){let t=this._o(r),n=[];if(!e)return this._d("path",n,t);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let s=t.fill&&t.fill!=="transparent"&&t.fill!==V,i=t.stroke!==V,h=!!(t.simplification&&t.simplification<1),u=function(a,l,c){let m=Ue(We(le(a))),f=[],p=[],d=[0,0],g=[],w=()=>{g.length>=4&&p.push(...tr(g,l)),g=[]},y=()=>{w(),p.length&&(f.push(p),p=[])};for(let{key:S,data:v}of m)switch(S){case"M":y(),d=[v[0],v[1]],p.push(d);break;case"L":w(),p.push([v[0],v[1]]);break;case"C":if(!g.length){let b=p.length?p[p.length-1]:d;g.push([b[0],b[1]])}g.push([v[0],v[1]]),g.push([v[2],v[3]]),g.push([v[4],v[5]]);break;case"Z":w(),p.push([d[0],d[1]])}if(y(),!c)return f;let M=[];for(let S of f){let v=An(S,c);v.length&&M.push(v)}return M}(e,1,h?4-4*t.simplification:(1+t.roughness)/2);return s&&(t.fillStyle==="solid"?n.push(jt(u,t)):n.push(lt(u,t))),i&&(h?u.forEach(a=>{n.push(Et(a,!1,t))}):n.push(function(a,l){let c=Ue(We(le(a))),m=[],f=[0,0],p=[0,0];for(let{key:d,data:g}of c)switch(d){case"M":{let w=1*(l.maxRandomnessOffset||0),y=l.preserveVertices;m.push({op:"move",data:g.map(M=>M+(y?0:k(w,l)))}),p=[g[0],g[1]],f=[g[0],g[1]];break}case"L":m.push(...H(p[0],p[1],g[0],g[1],l)),p=[g[0],g[1]];break;case"C":{let[w,y,M,S,v,b]=g;m.push(...Kn(w,y,M,S,v,b,p,l)),p=[v,b];break}case"Z":m.push(...H(p[0],p[1],f[0],f[1],l)),p=[f[0],f[1]]}return{type:"path",ops:m}}(e,t))),this._d("path",n,t)}opsToPath(e,r){let t="";for(let n of e.ops){let s=typeof r=="number"&&r>=0?n.data.map(i=>+i.toFixed(r)):n.data;switch(n.op){case"move":t+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":t+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":t+=`L${s[0]} ${s[1]} `}}return t.trim()}toPaths(e){let r=e.sets||[],t=e.options||this.defaultOptions,n=[];for(let s of r){let i=null;switch(s.type){case"path":i={d:this.opsToPath(s),stroke:t.stroke,strokeWidth:t.strokeWidth,fill:V};break;case"fillPath":i={d:this.opsToPath(s),stroke:V,strokeWidth:0,fill:t.fill||V};break;case"fillSketch":i=this.fillSketch(s,t)}i&&n.push(i)}return n}fillSketch(e,r){let t=r.fillWeight;return t<0&&(t=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||V,strokeWidth:t,fill:V}}},er=class{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new dt(r)}draw(e){let r=e.sets||[],t=e.options||this.getDefaultOptions(),n=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(let i of r)switch(i.type){case"path":n.save(),n.strokeStyle=t.stroke==="none"?"transparent":t.stroke,n.lineWidth=t.strokeWidth,t.strokeLineDash&&n.setLineDash(t.strokeLineDash),t.strokeLineDashOffset&&(n.lineDashOffset=t.strokeLineDashOffset),this._drawToContext(n,i,s),n.restore();break;case"fillPath":{n.save(),n.fillStyle=t.fill||"";let h=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,i,s,h),n.restore();break}case"fillSketch":this.fillSketch(n,i,t)}}fillSketch(e,r,t){let n=t.fillWeight;n<0&&(n=t.strokeWidth/2),e.save(),t.fillLineDash&&e.setLineDash(t.fillLineDash),t.fillLineDashOffset&&(e.lineDashOffset=t.fillLineDashOffset),e.strokeStyle=t.fill||"",e.lineWidth=n,this._drawToContext(e,r,t.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,t,n="nonzero"){e.beginPath();for(let s of r.ops){let i=typeof t=="number"&&t>=0?s.data.map(h=>+h.toFixed(t)):s.data;switch(s.op){case"move":e.moveTo(i[0],i[1]);break;case"bcurveTo":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":e.lineTo(i[0],i[1])}}r.type==="fillPath"?e.fill(n):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,t,n,s){let i=this.gen.line(e,r,t,n,s);return this.draw(i),i}rectangle(e,r,t,n,s){let i=this.gen.rectangle(e,r,t,n,s);return this.draw(i),i}ellipse(e,r,t,n,s){let i=this.gen.ellipse(e,r,t,n,s);return this.draw(i),i}circle(e,r,t,n){let s=this.gen.circle(e,r,t,n);return this.draw(s),s}linearPath(e,r){let t=this.gen.linearPath(e,r);return this.draw(t),t}polygon(e,r){let t=this.gen.polygon(e,r);return this.draw(t),t}arc(e,r,t,n,s,i,h=!1,u){let a=this.gen.arc(e,r,t,n,s,i,h,u);return this.draw(a),a}curve(e,r){let t=this.gen.curve(e,r);return this.draw(t),t}path(e,r){let t=this.gen.path(e,r);return this.draw(t),t}},Tt="http://www.w3.org/2000/svg",rr=class{constructor(e,r){this.svg=e,this.gen=new dt(r)}draw(e){let r=e.sets||[],t=e.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,s=n.createElementNS(Tt,"g"),i=e.options.fixedDecimalPlaceDigits;for(let h of r){let u=null;switch(h.type){case"path":u=n.createElementNS(Tt,"path"),u.setAttribute("d",this.opsToPath(h,i)),u.setAttribute("stroke",t.stroke),u.setAttribute("stroke-width",t.strokeWidth+""),u.setAttribute("fill","none"),t.strokeLineDash&&u.setAttribute("stroke-dasharray",t.strokeLineDash.join(" ").trim()),t.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${t.strokeLineDashOffset}`);break;case"fillPath":u=n.createElementNS(Tt,"path"),u.setAttribute("d",this.opsToPath(h,i)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",t.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||u.setAttribute("fill-rule","evenodd");break;case"fillSketch":u=this.fillSketch(n,h,t)}u&&s.appendChild(u)}return s}fillSketch(e,r,t){let n=t.fillWeight;n<0&&(n=t.strokeWidth/2);let s=e.createElementNS(Tt,"path");return s.setAttribute("d",this.opsToPath(r,t.fixedDecimalPlaceDigits)),s.setAttribute("stroke",t.fill||""),s.setAttribute("stroke-width",n+""),s.setAttribute("fill","none"),t.fillLineDash&&s.setAttribute("stroke-dasharray",t.fillLineDash.join(" ").trim()),t.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${t.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,t,n,s){let i=this.gen.line(e,r,t,n,s);return this.draw(i)}rectangle(e,r,t,n,s){let i=this.gen.rectangle(e,r,t,n,s);return this.draw(i)}ellipse(e,r,t,n,s){let i=this.gen.ellipse(e,r,t,n,s);return this.draw(i)}circle(e,r,t,n){let s=this.gen.circle(e,r,t,n);return this.draw(s)}linearPath(e,r){let t=this.gen.linearPath(e,r);return this.draw(t)}polygon(e,r){let t=this.gen.polygon(e,r);return this.draw(t)}arc(e,r,t,n,s,i,h=!1,u){let a=this.gen.arc(e,r,t,n,s,i,h,u);return this.draw(a)}curve(e,r){let t=this.gen.curve(e,r);return this.draw(t)}path(e,r){let t=this.gen.path(e,r);return this.draw(t)}},Ot={canvas:(o,e)=>new er(o,e),svg:(o,e)=>new rr(o,e),generator:o=>new dt(o),newSeed:()=>dt.newSeed()};function Jn(o,e){let r=0;for(let t=0;t<o.length;t++)r+=(o[t]-e[t])*(o[t]-e[t]);return r}function nr(o,e){return Math.sqrt(Jn(o,e))}function pe(o,e){let r=Zn(o.length);for(let t=0;t<o.length;t++)for(let n=0;n<=t;n++)r[t][n]=e(o[t],o[n]),r[n][t]=r[t][n];return r}function Zn(o){let e=[];for(let r=0;r<o;r++){let t=[];e.push(t);for(let n=0;n<o;n++)t.push(0)}return e}var to=Object.prototype.toString;function Z(o){return to.call(o).endsWith("Array]")}function eo(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Z(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,t=r===void 0?0:r,n=e.toIndex,s=n===void 0?o.length:n;if(t<0||t>=o.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=t||s>o.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=o[t],h=t+1;h<s;h++)o[h]>i&&(i=o[h]);return i}var or=eo;function ro(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Z(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,t=r===void 0?0:r,n=e.toIndex,s=n===void 0?o.length:n;if(t<0||t>=o.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=t||s>o.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=o[t],h=t+1;h<s;h++)o[h]<i&&(i=o[h]);return i}var sr=ro;function de(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z(o)){if(o.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(e.output!==void 0){if(!Z(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(o.length);var t=sr(o),n=or(o);if(t===n)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=e.min,i=s===void 0?e.autoMinMax?t:0:s,h=e.max,u=h===void 0?e.autoMinMax?n:1:h;if(i>=u)throw new RangeError("min option must be smaller than max option");for(var a=(u-i)/(n-t),l=0;l<o.length;l++)r[l]=(o[l]-t)*a+i;return r}var qt=" ".repeat(2),ir=" ".repeat(4);function hr(){return me(this)}function me(o,e={}){let{maxRows:r=15,maxColumns:t=10,maxNumSize:n=8}=e;return`${o.constructor.name} {
${qt}[
${ir}${no(o,r,t,n)}
${qt}]
${qt}rows: ${o.rows}
${qt}columns: ${o.columns}
}`}function no(o,e,r,t){let{rows:n,columns:s}=o,i=Math.min(n,e),h=Math.min(s,r),u=[];for(let a=0;a<i;a++){let l=[];for(let c=0;c<h;c++)l.push(oo(o.get(a,c),t));u.push(`${l.join(" ")}`)}return h!==s&&(u[u.length-1]+=` ... ${s-r} more columns`),i!==n&&u.push(`... ${n-e} more rows`),u.join(`
${ir}`)}function oo(o,e){let r=String(o);if(r.length<=e)return r.padEnd(e," ");let t=o.toPrecision(e-2);if(t.length<=e)return t;let n=o.toExponential(e-2),s=n.indexOf("e"),i=n.slice(s);return n.slice(0,e-i.length)+i}function ur(o,e){o.prototype.add=function(t){return typeof t=="number"?this.addS(t):this.addM(t)},o.prototype.addS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)+t);return this},o.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)+t.get(n,s));return this},o.add=function(t,n){return new e(t).add(n)},o.prototype.sub=function(t){return typeof t=="number"?this.subS(t):this.subM(t)},o.prototype.subS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)-t);return this},o.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)-t.get(n,s));return this},o.sub=function(t,n){return new e(t).sub(n)},o.prototype.subtract=o.prototype.sub,o.prototype.subtractS=o.prototype.subS,o.prototype.subtractM=o.prototype.subM,o.subtract=o.sub,o.prototype.mul=function(t){return typeof t=="number"?this.mulS(t):this.mulM(t)},o.prototype.mulS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)*t);return this},o.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)*t.get(n,s));return this},o.mul=function(t,n){return new e(t).mul(n)},o.prototype.multiply=o.prototype.mul,o.prototype.multiplyS=o.prototype.mulS,o.prototype.multiplyM=o.prototype.mulM,o.multiply=o.mul,o.prototype.div=function(t){return typeof t=="number"?this.divS(t):this.divM(t)},o.prototype.divS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)/t);return this},o.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)/t.get(n,s));return this},o.div=function(t,n){return new e(t).div(n)},o.prototype.divide=o.prototype.div,o.prototype.divideS=o.prototype.divS,o.prototype.divideM=o.prototype.divM,o.divide=o.div,o.prototype.mod=function(t){return typeof t=="number"?this.modS(t):this.modM(t)},o.prototype.modS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)%t);return this},o.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)%t.get(n,s));return this},o.mod=function(t,n){return new e(t).mod(n)},o.prototype.modulus=o.prototype.mod,o.prototype.modulusS=o.prototype.modS,o.prototype.modulusM=o.prototype.modM,o.modulus=o.mod,o.prototype.and=function(t){return typeof t=="number"?this.andS(t):this.andM(t)},o.prototype.andS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)&t);return this},o.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)&t.get(n,s));return this},o.and=function(t,n){return new e(t).and(n)},o.prototype.or=function(t){return typeof t=="number"?this.orS(t):this.orM(t)},o.prototype.orS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)|t);return this},o.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)|t.get(n,s));return this},o.or=function(t,n){return new e(t).or(n)},o.prototype.xor=function(t){return typeof t=="number"?this.xorS(t):this.xorM(t)},o.prototype.xorS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)^t);return this},o.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)^t.get(n,s));return this},o.xor=function(t,n){return new e(t).xor(n)},o.prototype.leftShift=function(t){return typeof t=="number"?this.leftShiftS(t):this.leftShiftM(t)},o.prototype.leftShiftS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)<<t);return this},o.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)<<t.get(n,s));return this},o.leftShift=function(t,n){return new e(t).leftShift(n)},o.prototype.signPropagatingRightShift=function(t){return typeof t=="number"?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},o.prototype.signPropagatingRightShiftS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)>>t);return this},o.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)>>t.get(n,s));return this},o.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},o.prototype.rightShift=function(t){return typeof t=="number"?this.rightShiftS(t):this.rightShiftM(t)},o.prototype.rightShiftS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)>>>t);return this},o.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,this.get(n,s)>>>t.get(n,s));return this},o.rightShift=function(t,n){return new e(t).rightShift(n)},o.prototype.zeroFillRightShift=o.prototype.rightShift,o.prototype.zeroFillRightShiftS=o.prototype.rightShiftS,o.prototype.zeroFillRightShiftM=o.prototype.rightShiftM,o.zeroFillRightShift=o.rightShift,o.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,~this.get(t,n));return this},o.not=function(t){return new e(t).not()},o.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.abs(this.get(t,n)));return this},o.abs=function(t){return new e(t).abs()},o.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.acos(this.get(t,n)));return this},o.acos=function(t){return new e(t).acos()},o.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.acosh(this.get(t,n)));return this},o.acosh=function(t){return new e(t).acosh()},o.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.asin(this.get(t,n)));return this},o.asin=function(t){return new e(t).asin()},o.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.asinh(this.get(t,n)));return this},o.asinh=function(t){return new e(t).asinh()},o.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.atan(this.get(t,n)));return this},o.atan=function(t){return new e(t).atan()},o.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.atanh(this.get(t,n)));return this},o.atanh=function(t){return new e(t).atanh()},o.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.cbrt(this.get(t,n)));return this},o.cbrt=function(t){return new e(t).cbrt()},o.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.ceil(this.get(t,n)));return this},o.ceil=function(t){return new e(t).ceil()},o.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.clz32(this.get(t,n)));return this},o.clz32=function(t){return new e(t).clz32()},o.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.cos(this.get(t,n)));return this},o.cos=function(t){return new e(t).cos()},o.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.cosh(this.get(t,n)));return this},o.cosh=function(t){return new e(t).cosh()},o.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.exp(this.get(t,n)));return this},o.exp=function(t){return new e(t).exp()},o.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.expm1(this.get(t,n)));return this},o.expm1=function(t){return new e(t).expm1()},o.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.floor(this.get(t,n)));return this},o.floor=function(t){return new e(t).floor()},o.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.fround(this.get(t,n)));return this},o.fround=function(t){return new e(t).fround()},o.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.log(this.get(t,n)));return this},o.log=function(t){return new e(t).log()},o.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.log1p(this.get(t,n)));return this},o.log1p=function(t){return new e(t).log1p()},o.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.log10(this.get(t,n)));return this},o.log10=function(t){return new e(t).log10()},o.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.log2(this.get(t,n)));return this},o.log2=function(t){return new e(t).log2()},o.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.round(this.get(t,n)));return this},o.round=function(t){return new e(t).round()},o.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.sign(this.get(t,n)));return this},o.sign=function(t){return new e(t).sign()},o.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.sin(this.get(t,n)));return this},o.sin=function(t){return new e(t).sin()},o.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.sinh(this.get(t,n)));return this},o.sinh=function(t){return new e(t).sinh()},o.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.sqrt(this.get(t,n)));return this},o.sqrt=function(t){return new e(t).sqrt()},o.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.tan(this.get(t,n)));return this},o.tan=function(t){return new e(t).tan()},o.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.tanh(this.get(t,n)));return this},o.tanh=function(t){return new e(t).tanh()},o.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.trunc(this.get(t,n)));return this},o.trunc=function(t){return new e(t).trunc()},o.pow=function(t,n){return new e(t).pow(n)},o.prototype.pow=function(t){return typeof t=="number"?this.powS(t):this.powM(t)},o.prototype.powS=function(t){for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,Math.pow(this.get(n,s),t));return this},o.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let n=0;n<this.rows;n++)for(let s=0;s<this.columns;s++)this.set(n,s,Math.pow(this.get(n,s),t.get(n,s)));return this}}function N(o,e,r){let t=r?o.rows:o.rows-1;if(e<0||e>t)throw new RangeError("Row index out of range")}function W(o,e,r){let t=r?o.columns:o.columns-1;if(e<0||e>t)throw new RangeError("Column index out of range")}function nt(o,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==o.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function ot(o,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==o.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function ar(o,e,r){return{row:so(o,e),column:io(o,r)}}function so(o,e){if(typeof e!="object")throw new TypeError("unexpected type for row indices");if(e.some(t=>t<0||t>=o.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function io(o,e){if(typeof e!="object")throw new TypeError("unexpected type for column indices");if(e.some(t=>t<0||t>=o.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ge(o,e,r,t,n){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Dt("startRow",e),Dt("endRow",r),Dt("startColumn",t),Dt("endColumn",n),e>r||t>n||e<0||e>=o.rows||r<0||r>=o.rows||t<0||t>=o.columns||n<0||n>=o.columns)throw new RangeError("Submatrix indices are out of range")}function mt(o,e=0){let r=[];for(let t=0;t<o;t++)r.push(e);return r}function Dt(o,e){if(typeof e!="number")throw new TypeError(`${o} must be a number`)}function st(o){if(o.isEmpty())throw new Error("Empty matrix has no elements to index")}function lr(o){let e=mt(o.rows);for(let r=0;r<o.rows;++r)for(let t=0;t<o.columns;++t)e[r]+=o.get(r,t);return e}function cr(o){let e=mt(o.columns);for(let r=0;r<o.rows;++r)for(let t=0;t<o.columns;++t)e[t]+=o.get(r,t);return e}function fr(o){let e=0;for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)e+=o.get(r,t);return e}function pr(o){let e=mt(o.rows,1);for(let r=0;r<o.rows;++r)for(let t=0;t<o.columns;++t)e[r]*=o.get(r,t);return e}function dr(o){let e=mt(o.columns,1);for(let r=0;r<o.rows;++r)for(let t=0;t<o.columns;++t)e[t]*=o.get(r,t);return e}function mr(o){let e=1;for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)e*=o.get(r,t);return e}function gr(o,e,r){let t=o.rows,n=o.columns,s=[];for(let i=0;i<t;i++){let h=0,u=0,a=0;for(let l=0;l<n;l++)a=o.get(i,l)-r[i],h+=a,u+=a*a;e?s.push((u-h*h/n)/(n-1)):s.push((u-h*h/n)/n)}return s}function wr(o,e,r){let t=o.rows,n=o.columns,s=[];for(let i=0;i<n;i++){let h=0,u=0,a=0;for(let l=0;l<t;l++)a=o.get(l,i)-r[i],h+=a,u+=a*a;e?s.push((u-h*h/t)/(t-1)):s.push((u-h*h/t)/t)}return s}function yr(o,e,r){let t=o.rows,n=o.columns,s=t*n,i=0,h=0,u=0;for(let a=0;a<t;a++)for(let l=0;l<n;l++)u=o.get(a,l)-r,i+=u,h+=u*u;return e?(h-i*i/s)/(s-1):(h-i*i/s)/s}function vr(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)-e[r])}function Mr(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)-e[t])}function Sr(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)-e)}function kr(o){let e=[];for(let r=0;r<o.rows;r++){let t=0;for(let n=0;n<o.columns;n++)t+=Math.pow(o.get(r,n),2)/(o.columns-1);e.push(Math.sqrt(t))}return e}function br(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)/e[r])}function xr(o){let e=[];for(let r=0;r<o.columns;r++){let t=0;for(let n=0;n<o.rows;n++)t+=Math.pow(o.get(n,r),2)/(o.rows-1);e.push(Math.sqrt(t))}return e}function Er(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)/e[t])}function jr(o){let e=o.size-1,r=0;for(let t=0;t<o.columns;t++)for(let n=0;n<o.rows;n++)r+=Math.pow(o.get(n,t),2)/e;return Math.sqrt(r)}function Pr(o,e){for(let r=0;r<o.rows;r++)for(let t=0;t<o.columns;t++)o.set(r,t,o.get(r,t)/e)}var E=class{static from1DArray(e,r,t){if(e*r!==t.length)throw new RangeError("data length does not match given dimensions");let s=new x(e,r);for(let i=0;i<e;i++)for(let h=0;h<r;h++)s.set(i,h,t[i*r+h]);return s}static rowVector(e){let r=new x(1,e.length);for(let t=0;t<e.length;t++)r.set(0,t,e[t]);return r}static columnVector(e){let r=new x(e.length,1);for(let t=0;t<e.length;t++)r.set(t,0,e[t]);return r}static zeros(e,r){return new x(e,r)}static ones(e,r){return new x(e,r).fill(1)}static rand(e,r,t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{random:n=Math.random}=t,s=new x(e,r);for(let i=0;i<e;i++)for(let h=0;h<r;h++)s.set(i,h,n());return s}static randInt(e,r,t={}){if(typeof t!="object")throw new TypeError("options must be an object");let{min:n=0,max:s=1e3,random:i=Math.random}=t;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(n>=s)throw new RangeError("min must be smaller than max");let h=s-n,u=new x(e,r);for(let a=0;a<e;a++)for(let l=0;l<r;l++){let c=n+Math.round(i()*h);u.set(a,l,c)}return u}static eye(e,r,t){r===void 0&&(r=e),t===void 0&&(t=1);let n=Math.min(e,r),s=this.zeros(e,r);for(let i=0;i<n;i++)s.set(i,i,t);return s}static diag(e,r,t){let n=e.length;r===void 0&&(r=n),t===void 0&&(t=r);let s=Math.min(n,r,t),i=this.zeros(r,t);for(let h=0;h<s;h++)i.set(h,h,e[h]);return i}static min(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let t=e.rows,n=e.columns,s=new x(t,n);for(let i=0;i<t;i++)for(let h=0;h<n;h++)s.set(i,h,Math.min(e.get(i,h),r.get(i,h)));return s}static max(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let t=e.rows,n=e.columns,s=new this(t,n);for(let i=0;i<t;i++)for(let h=0;h<n;h++)s.set(i,h,Math.max(e.get(i,h),r.get(i,h)));return s}static checkMatrix(e){return E.isMatrix(e)?e:new x(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)e.call(this,r,t);return this}to1DArray(){let e=[];for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)e.push(this.get(r,t));return e}to2DArray(){let e=[];for(let r=0;r<this.rows;r++){e.push([]);for(let t=0;t<this.columns;t++)e[r].push(this.get(r,t))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let r=0;r<=e;r++)if(this.get(e,r)!==this.get(r,e))return!1;return!0}return!1}isEchelonForm(){let e=0,r=0,t=-1,n=!0,s=!1;for(;e<this.rows&&n;){for(r=0,s=!1;r<this.columns&&s===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>t?(s=!0,t=r):(n=!1,s=!0);e++}return n}isReducedEchelonForm(){let e=0,r=0,t=-1,n=!0,s=!1;for(;e<this.rows&&n;){for(r=0,s=!1;r<this.columns&&s===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>t?(s=!0,t=r):(n=!1,s=!0);for(let i=r+1;i<this.rows;i++)this.get(e,i)!==0&&(n=!1);e++}return n}echelonForm(){let e=this.clone(),r=0,t=0;for(;r<e.rows&&t<e.columns;){let n=r;for(let s=r;s<e.rows;s++)e.get(s,t)>e.get(n,t)&&(n=s);if(e.get(n,t)===0)t++;else{e.swapRows(r,n);let s=e.get(r,t);for(let i=t;i<e.columns;i++)e.set(r,i,e.get(r,i)/s);for(let i=r+1;i<e.rows;i++){let h=e.get(i,t)/e.get(r,t);e.set(i,t,0);for(let u=t+1;u<e.columns;u++)e.set(i,u,e.get(i,u)-e.get(r,u)*h)}r++,t++}}return e}reducedEchelonForm(){let e=this.echelonForm(),r=e.columns,t=e.rows,n=t-1;for(;n>=0;)if(e.maxRow(n)===0)n--;else{let s=0,i=!1;for(;s<t&&i===!1;)e.get(n,s)===1?i=!0:s++;for(let h=0;h<n;h++){let u=e.get(h,s);for(let a=s;a<r;a++){let l=e.get(h,a)-u*e.get(n,a);e.set(h,a,l)}}n--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{rows:r=1,columns:t=1}=e;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(t)||t<=0)throw new TypeError("columns must be a positive integer");let n=new x(this.rows*r,this.columns*t);for(let s=0;s<r;s++)for(let i=0;i<t;i++)n.setSubMatrix(this,this.rows*s,this.columns*i);return n}fill(e){for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,e);return this}neg(){return this.mulS(-1)}getRow(e){N(this,e);let r=[];for(let t=0;t<this.columns;t++)r.push(this.get(e,t));return r}getRowVector(e){return x.rowVector(this.getRow(e))}setRow(e,r){N(this,e),r=nt(this,r);for(let t=0;t<this.columns;t++)this.set(e,t,r[t]);return this}swapRows(e,r){N(this,e),N(this,r);for(let t=0;t<this.columns;t++){let n=this.get(e,t);this.set(e,t,this.get(r,t)),this.set(r,t,n)}return this}getColumn(e){W(this,e);let r=[];for(let t=0;t<this.rows;t++)r.push(this.get(t,e));return r}getColumnVector(e){return x.columnVector(this.getColumn(e))}setColumn(e,r){W(this,e),r=ot(this,r);for(let t=0;t<this.rows;t++)this.set(t,e,r[t]);return this}swapColumns(e,r){W(this,e),W(this,r);for(let t=0;t<this.rows;t++){let n=this.get(t,e);this.set(t,e,this.get(t,r)),this.set(t,r,n)}return this}addRowVector(e){e=nt(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)+e[t]);return this}subRowVector(e){e=nt(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)-e[t]);return this}mulRowVector(e){e=nt(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)*e[t]);return this}divRowVector(e){e=nt(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)/e[t]);return this}addColumnVector(e){e=ot(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)+e[r]);return this}subColumnVector(e){e=ot(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)-e[r]);return this}mulColumnVector(e){e=ot(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)*e[r]);return this}divColumnVector(e){e=ot(this,e);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.set(r,t,this.get(r,t)/e[r]);return this}mulRow(e,r){N(this,e);for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*r);return this}mulColumn(e,r){W(this,e);for(let t=0;t<this.rows;t++)this.set(t,e,this.get(t,e)*r);return this}max(){if(this.isEmpty())return NaN;let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxIndex(){st(this);let e=this.get(0,0),r=[0,0];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[0]=t,r[1]=n);return r}min(){if(this.isEmpty())return NaN;let e=this.get(0,0);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)this.get(r,t)<e&&(e=this.get(r,t));return e}minIndex(){st(this);let e=this.get(0,0),r=[0,0];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[0]=t,r[1]=n);return r}maxRow(e){if(N(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let t=1;t<this.columns;t++)this.get(e,t)>r&&(r=this.get(e,t));return r}maxRowIndex(e){N(this,e),st(this);let r=this.get(e,0),t=[e,0];for(let n=1;n<this.columns;n++)this.get(e,n)>r&&(r=this.get(e,n),t[1]=n);return t}minRow(e){if(N(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let t=1;t<this.columns;t++)this.get(e,t)<r&&(r=this.get(e,t));return r}minRowIndex(e){N(this,e),st(this);let r=this.get(e,0),t=[e,0];for(let n=1;n<this.columns;n++)this.get(e,n)<r&&(r=this.get(e,n),t[1]=n);return t}maxColumn(e){if(W(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let t=1;t<this.rows;t++)this.get(t,e)>r&&(r=this.get(t,e));return r}maxColumnIndex(e){W(this,e),st(this);let r=this.get(0,e),t=[0,e];for(let n=1;n<this.rows;n++)this.get(n,e)>r&&(r=this.get(n,e),t[0]=n);return t}minColumn(e){if(W(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let t=1;t<this.rows;t++)this.get(t,e)<r&&(r=this.get(t,e));return r}minColumnIndex(e){W(this,e),st(this);let r=this.get(0,e),t=[0,e];for(let n=1;n<this.rows;n++)this.get(n,e)<r&&(r=this.get(n,e),t[0]=n);return t}diag(){let e=Math.min(this.rows,this.columns),r=[];for(let t=0;t<e;t++)r.push(this.get(t,t));return r}norm(e="frobenius"){let r=0;if(e==="max")return this.max();if(e==="frobenius"){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)r=r+this.get(t,n)*this.get(t,n);return Math.sqrt(r)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)e+=this.get(r,t),this.set(r,t,e);return this}dot(e){E.isMatrix(e)&&(e=e.to1DArray());let r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");let t=0;for(let n=0;n<r.length;n++)t+=r[n]*e[n];return t}mmul(e){e=x.checkMatrix(e);let r=this.rows,t=this.columns,n=e.columns,s=new x(r,n),i=new Float64Array(t);for(let h=0;h<n;h++){for(let u=0;u<t;u++)i[u]=e.get(u,h);for(let u=0;u<r;u++){let a=0;for(let l=0;l<t;l++)a+=this.get(u,l)*i[l];s.set(u,h,a)}}return s}strassen2x2(e){e=x.checkMatrix(e);let r=new x(2,2),t=this.get(0,0),n=e.get(0,0),s=this.get(0,1),i=e.get(0,1),h=this.get(1,0),u=e.get(1,0),a=this.get(1,1),l=e.get(1,1),c=(t+a)*(n+l),m=(h+a)*n,f=t*(i-l),p=a*(u-n),d=(t+s)*l,g=(h-t)*(n+i),w=(s-a)*(u+l),y=c+p-d+w,M=f+d,S=m+p,v=c-m+f+g;return r.set(0,0,y),r.set(0,1,M),r.set(1,0,S),r.set(1,1,v),r}strassen3x3(e){e=x.checkMatrix(e);let r=new x(3,3),t=this.get(0,0),n=this.get(0,1),s=this.get(0,2),i=this.get(1,0),h=this.get(1,1),u=this.get(1,2),a=this.get(2,0),l=this.get(2,1),c=this.get(2,2),m=e.get(0,0),f=e.get(0,1),p=e.get(0,2),d=e.get(1,0),g=e.get(1,1),w=e.get(1,2),y=e.get(2,0),M=e.get(2,1),S=e.get(2,2),v=(t+n+s-i-h-l-c)*g,b=(t-i)*(-f+g),j=h*(-m+f+d-g-w-y+S),R=(-t+i+h)*(m-f+g),z=(i+h)*(-m+f),P=t*m,L=(-t+a+l)*(m-p+w),A=(-t+a)*(p-w),I=(a+l)*(-m+p),T=(t+n+s-h-u-a-l)*w,B=l*(-m+p+d-g-w-y+M),D=(-s+l+c)*(g+y-M),U=(s-c)*(g-M),_=s*y,J=(l+c)*(-y+M),G=(-s+h+u)*(w+y-S),De=(s-u)*(w-S),Le=(h+u)*(-y+S),En=n*d,jn=u*M,Pn=i*p,Rn=a*f,Cn=c*S,zn=P+_+En,Tn=v+R+z+P+D+_+J,On=P+L+I+T+_+G+Le,qn=b+j+R+P+_+G+De,Dn=b+R+z+P+jn,Ln=_+G+De+Le+Pn,In=P+L+A+B+D+U+_,Fn=D+U+_+J+Rn,Gn=P+L+A+I+Cn;return r.set(0,0,zn),r.set(0,1,Tn),r.set(0,2,On),r.set(1,0,qn),r.set(1,1,Dn),r.set(1,2,Ln),r.set(2,0,In),r.set(2,1,Fn),r.set(2,2,Gn),r}mmulStrassen(e){e=x.checkMatrix(e);let r=this.clone(),t=r.rows,n=r.columns,s=e.rows,i=e.columns;n!==s&&console.warn(`Multiplying ${t} x ${n} and ${s} x ${i} matrix: dimensions do not match.`);function h(c,m,f){let p=c.rows,d=c.columns;if(p===m&&d===f)return c;{let g=E.zeros(m,f);return g=g.setSubMatrix(c,0,0),g}}let u=Math.max(t,s),a=Math.max(n,i);r=h(r,u,a),e=h(e,u,a);function l(c,m,f,p){if(f<=512||p<=512)return c.mmul(m);f%2==1&&p%2==1?(c=h(c,f+1,p+1),m=h(m,f+1,p+1)):f%2==1?(c=h(c,f+1,p),m=h(m,f+1,p)):p%2==1&&(c=h(c,f,p+1),m=h(m,f,p+1));let d=parseInt(c.rows/2,10),g=parseInt(c.columns/2,10),w=c.subMatrix(0,d-1,0,g-1),y=m.subMatrix(0,d-1,0,g-1),M=c.subMatrix(0,d-1,g,c.columns-1),S=m.subMatrix(0,d-1,g,m.columns-1),v=c.subMatrix(d,c.rows-1,0,g-1),b=m.subMatrix(d,m.rows-1,0,g-1),j=c.subMatrix(d,c.rows-1,g,c.columns-1),R=m.subMatrix(d,m.rows-1,g,m.columns-1),z=l(E.add(w,j),E.add(y,R),d,g),P=l(E.add(v,j),y,d,g),L=l(w,E.sub(S,R),d,g),A=l(j,E.sub(b,y),d,g),I=l(E.add(w,M),R,d,g),T=l(E.sub(v,w),E.add(y,S),d,g),B=l(E.sub(M,j),E.add(b,R),d,g),D=E.add(z,A);D.sub(I),D.add(B);let U=E.add(L,I),_=E.add(P,A),J=E.sub(z,P);J.add(L),J.add(T);let G=E.zeros(2*D.rows,2*D.columns);return G=G.setSubMatrix(D,0,0),G=G.setSubMatrix(U,D.rows,0),G=G.setSubMatrix(_,0,D.columns),G=G.setSubMatrix(J,D.rows,D.columns),G.subMatrix(0,f-1,0,p-1)}return l(r,e,u,a)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:r=0,max:t=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(t))throw new TypeError("max must be a number");if(r>=t)throw new RangeError("min must be smaller than max");let n=new x(this.rows,this.columns);for(let s=0;s<this.rows;s++){let i=this.getRow(s);i.length>0&&de(i,{min:r,max:t,output:i}),n.setRow(s,i)}return n}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:r=0,max:t=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(t))throw new TypeError("max must be a number");if(r>=t)throw new RangeError("min must be smaller than max");let n=new x(this.rows,this.columns);for(let s=0;s<this.columns;s++){let i=this.getColumn(s);i.length&&de(i,{min:r,max:t,output:i}),n.setColumn(s,i)}return n}flipRows(){let e=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let t=0;t<e;t++){let n=this.get(r,t),s=this.get(r,this.columns-1-t);this.set(r,t,s),this.set(r,this.columns-1-t,n)}return this}flipColumns(){let e=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let t=0;t<e;t++){let n=this.get(t,r),s=this.get(this.rows-1-t,r);this.set(t,r,s),this.set(this.rows-1-t,r,n)}return this}kroneckerProduct(e){e=x.checkMatrix(e);let r=this.rows,t=this.columns,n=e.rows,s=e.columns,i=new x(r*n,t*s);for(let h=0;h<r;h++)for(let u=0;u<t;u++)for(let a=0;a<n;a++)for(let l=0;l<s;l++)i.set(n*h+a,s*u+l,this.get(h,u)*e.get(a,l));return i}kroneckerSum(e){if(e=x.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let r=this.rows,t=e.rows,n=this.kroneckerProduct(x.eye(t,t)),s=x.eye(r,r).kroneckerProduct(e);return n.add(s)}transpose(){let e=new x(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)e.set(t,r,this.get(r,t));return e}sortRows(e=Rr){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(e));return this}sortColumns(e=Rr){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(e));return this}subMatrix(e,r,t,n){ge(this,e,r,t,n);let s=new x(r-e+1,n-t+1);for(let i=e;i<=r;i++)for(let h=t;h<=n;h++)s.set(i-e,h-t,this.get(i,h));return s}subMatrixRow(e,r,t){if(r===void 0&&(r=0),t===void 0&&(t=this.columns-1),r>t||r<0||r>=this.columns||t<0||t>=this.columns)throw new RangeError("Argument out of range");let n=new x(e.length,t-r+1);for(let s=0;s<e.length;s++)for(let i=r;i<=t;i++){if(e[s]<0||e[s]>=this.rows)throw new RangeError(`Row index out of range: ${e[s]}`);n.set(s,i-r,this.get(e[s],i))}return n}subMatrixColumn(e,r,t){if(r===void 0&&(r=0),t===void 0&&(t=this.rows-1),r>t||r<0||r>=this.rows||t<0||t>=this.rows)throw new RangeError("Argument out of range");let n=new x(t-r+1,e.length);for(let s=0;s<e.length;s++)for(let i=r;i<=t;i++){if(e[s]<0||e[s]>=this.columns)throw new RangeError(`Column index out of range: ${e[s]}`);n.set(i-r,s,this.get(i,e[s]))}return n}setSubMatrix(e,r,t){if(e=x.checkMatrix(e),e.isEmpty())return this;let n=r+e.rows-1,s=t+e.columns-1;ge(this,r,n,t,s);for(let i=0;i<e.rows;i++)for(let h=0;h<e.columns;h++)this.set(r+i,t+h,e.get(i,h));return this}selection(e,r){let t=ar(this,e,r),n=new x(e.length,r.length);for(let s=0;s<t.row.length;s++){let i=t.row[s];for(let h=0;h<t.column.length;h++){let u=t.column[h];n.set(s,h,this.get(i,u))}}return n}trace(){let e=Math.min(this.rows,this.columns),r=0;for(let t=0;t<e;t++)r+=this.get(t,t);return r}clone(){let e=new x(this.rows,this.columns);for(let r=0;r<this.rows;r++)for(let t=0;t<this.columns;t++)e.set(r,t,this.get(r,t));return e}sum(e){switch(e){case"row":return lr(this);case"column":return cr(this);case void 0:return fr(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return pr(this);case"column":return dr(this);case void 0:return mr(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){let r=this.sum(e);switch(e){case"row":{for(let t=0;t<this.rows;t++)r[t]/=this.columns;return r}case"column":{for(let t=0;t<this.columns;t++)r[t]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let{unbiased:t=!0,mean:n=this.mean(e)}=r;if(typeof t!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Array.isArray(n))throw new TypeError("mean must be an array");return gr(this,t,n)}case"column":{if(!Array.isArray(n))throw new TypeError("mean must be an array");return wr(this,t,n)}case void 0:{if(typeof n!="number")throw new TypeError("mean must be a number");return yr(this,t,n)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,r){typeof e=="object"&&(r=e,e=void 0);let t=this.variance(e,r);if(e===void 0)return Math.sqrt(t);for(let n=0;n<t.length;n++)t[n]=Math.sqrt(t[n]);return t}center(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let{center:t=this.mean(e)}=r;switch(e){case"row":{if(!Array.isArray(t))throw new TypeError("center must be an array");return vr(this,t),this}case"column":{if(!Array.isArray(t))throw new TypeError("center must be an array");return Mr(this,t),this}case void 0:{if(typeof t!="number")throw new TypeError("center must be a number");return Sr(this,t),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let t=r.scale;switch(e){case"row":{if(t===void 0)t=kr(this);else if(!Array.isArray(t))throw new TypeError("scale must be an array");return br(this,t),this}case"column":{if(t===void 0)t=xr(this);else if(!Array.isArray(t))throw new TypeError("scale must be an array");return Er(this,t),this}case void 0:{if(t===void 0)t=jr(this);else if(typeof t!="number")throw new TypeError("scale must be a number");return Pr(this,t),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return me(this,e)}};E.prototype.klass="Matrix";typeof Symbol!="undefined"&&(E.prototype[Symbol.for("nodejs.util.inspect.custom")]=hr);function Rr(o,e){return o-e}E.random=E.rand;E.randomInt=E.randInt;E.diagonal=E.diag;E.prototype.diagonal=E.prototype.diag;E.identity=E.eye;E.prototype.negate=E.prototype.neg;E.prototype.tensorProduct=E.prototype.kroneckerProduct;var x=class extends E{constructor(e,r){super();if(x.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0)if(this.data=[],Number.isInteger(r)&&r>=0)for(let t=0;t<e;t++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){let t=e;if(e=t.length,r=e?t[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<e;n++){if(t[n].length!==r)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(t[n]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=e,this.columns=r}set(e,r,t){return this.data[e][r]=t,this}get(e,r){return this.data[e][r]}removeRow(e){return N(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,r){return r===void 0&&(r=e,e=this.rows),N(this,e,!0),r=Float64Array.from(nt(this,r)),this.data.splice(e,0,r),this.rows+=1,this}removeColumn(e){W(this,e);for(let r=0;r<this.rows;r++){let t=new Float64Array(this.columns-1);for(let n=0;n<e;n++)t[n]=this.data[r][n];for(let n=e+1;n<this.columns;n++)t[n-1]=this.data[r][n];this.data[r]=t}return this.columns-=1,this}addColumn(e,r){typeof r=="undefined"&&(r=e,e=this.columns),W(this,e,!0),r=ot(this,r);for(let t=0;t<this.rows;t++){let n=new Float64Array(this.columns+1),s=0;for(;s<e;s++)n[s]=this.data[t][s];for(n[s++]=r[t];s<this.columns+1;s++)n[s]=this.data[t][s-1];this.data[t]=n}return this.columns+=1,this}};ur(E,x);var qr=Ie(Or()),it=class{constructor(){this.children=[],this.height=0,this.size=1,this.index=-1,this.isLeaf=!1}cut(e){if(typeof e!="number")throw new TypeError("threshold must be a number");if(e<0)throw new RangeError("threshold must be a positive number");let r=[this],t=[];for(;r.length>0;){let n=r.shift();e>=n.height?t.push(n):r=r.concat(n.children)}return t}group(e){if(!Number.isInteger(e)||e<1)throw new RangeError("groups must be a positive integer");let r=new qr.default((n,s)=>s.height-n.height);for(r.push(this);r.size()<e;){let n=r.pop();if(n.children.length===0)break;n.children.forEach(s=>r.push(s))}let t=new it;return t.children=r.toArray(),t.height=this.height,t}traverse(e){function r(t,n){if(n(t),t.children)for(let s of t.children)r(s,n)}r(this,e)}indices(){let e=[];return this.traverse(r=>{r.isLeaf&&e.push(r.index)}),e}};function ho(o,e){return Math.min(o,e)}function uo(o,e){return Math.max(o,e)}function ao(o,e,r,t,n){let s=t/(t+n),i=n/(t+n);return s*o+i*e}function lo(o,e){return(o+e)/2}function co(o,e,r,t,n){let s=t/(t+n),i=n/(t+n),h=-(t*n)/(t+n)**2;return s*o+i*e+h*r}function fo(o,e,r){return o/2+e/2-r/4}function po(o,e,r,t,n,s){let i=(t+s)/(t+n+s),h=(n+s)/(t+n+s),u=-s/(t+n+s);return i*o+h*e+u*r}function mo(o,e,r,t,n,s){let i=(t+s)/(t+n+s),h=(n+s)/(t+n+s),u=-s/(t+n+s);return Math.sqrt(i*o*o+h*e*e+u*r*r)}function ye(o,e={}){let{distanceFunction:r=nr,method:t="complete",isDistanceMatrix:n=!1}=e,s;n||(o=pe(o,r));let i=new x(o),h=i.rows;if(typeof t=="string")switch(t.toLowerCase()){case"single":s=ho;break;case"complete":s=uo;break;case"average":case"upgma":s=ao;break;case"wpgma":s=lo;break;case"centroid":case"upgmc":s=co;break;case"median":case"wpgmc":s=fo;break;case"ward":s=po;break;case"ward2":s=mo;break;default:throw new RangeError(`unknown clustering method: ${t}`)}else if(typeof t!="function")throw new TypeError("method must be a string or function");let u=[];for(let a=0;a<h;a++){let l=new it;l.isLeaf=!0,l.index=a,u.push(l)}for(let a=0;a<h-1;a++){let[l,c,m]=go(i),f=u[l],p=u[c],d=new it;d.size=f.size+p.size,d.children.push(f,p),d.height=m;let g=[d],w=new x(i.rows-1,i.rows-1),y=M=>wo(M,Math.min(l,c),Math.max(l,c));for(let M=1;M<w.rows;M++){let S=y(M),v=u[S];g.push(v);for(let b=0;b<M;b++)if(b===0){let j=i.get(l,S),R=i.get(S,c),z=s(j,R,m,f.size,p.size,v.size);w.set(M,b,z),w.set(b,M,z)}else{let j=i.get(S,y(b));w.set(M,b,j),w.set(b,M,j)}}u=g,i=w}return u[0]}function go(o){let e=1/0,r=0,t=0;for(let n=1;n<o.rows;n++)for(let s=0;s<n;s++)o.get(n,s)<e&&(e=o.get(n,s),r=n,t=s);return[r,t,e]}function wo(o,e,r){return o-=1,o>=e&&o++,o>=r&&o++,o}var K=o=>o.toFixed(2),Dr=(o,e,r=0)=>Array(o).fill(null).map(()=>Array(e).fill(r)),ve=(o,e=0)=>Array(o).fill(e),Lt=o=>[Math.min(...o),Math.max(...o)],ht=o=>o.reduce((e,r)=>e+r,0)/o.length;function gt(o){let e=document.createElement("canvas");return e.width=o,e.height=o,e.style.width=`${o}px`,e.style.height=`${o}px`,document.body.appendChild(e),e}function wt(o,e,r,t){o.font="12px '72', Arial, sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText(t,e,r)}function It(o){return o.children.length===0?0:Math.max(...o.children.map(e=>It(e)+1))}function Me(o){let e=1/0,r=-1/0,t=1/0,n=-1/0,s=1/0,i=-1/0;for(let h of o){let u=h.x,a=h.y,l=h.z;u<e&&(e=u),u>r&&(r=u),a<t&&(t=a),a>n&&(n=a),l<s&&(s=l),l>i&&(i=l)}return{minX:e,minY:t,minZ:s,maxX:r,maxY:n,maxZ:i}}function Lr(o,e){return{minX:Math.min(o.minX,e.minX),minY:Math.min(o.minY,e.minY),minZ:Math.min(o.minZ,e.minZ),maxX:Math.max(o.maxX,e.maxX),maxY:Math.max(o.maxY,e.maxY),maxZ:Math.max(o.maxZ,e.maxZ)}}function Se(o){let[e,r]=Lt(o),t=r-e;return o.map(n=>(n-e)/t)}function Ir(o){let e=Se(o.map(n=>n[0])),r=Se(o.map(n=>n[1])),t=Se(o.map(n=>n[2]));return e.map((n,s)=>[e[s],r[s],t[s]])}function Fr(o,e){return o=Math.ceil(o),e=Math.floor(e),Math.floor(Math.random()*(e-o)+o)}var Q=[["\u0410\u0437\u0435\u0440\u0431\u0430\u0439\u0434\u0436\u0430\u043D",28.2,70.5],["\u0410\u0440\u043C\u0435\u043D\u0438\u044F",17.1,70.4],["\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u044C",12.5,70.3],["\u041A\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043D",28.4,68.6],["\u041A\u044B\u0440\u0433\u044B\u0437\u0441\u0442\u0430\u043D",31.8,68.8],["\u041C\u043E\u043B\u0434\u043E\u0432\u0430",21.5,67.7],["\u0420\u043E\u0441\u0441\u0438\u044F",20,69],["\u0422\u0430\u0434\u0436\u0438\u043A\u0438\u0441\u0442\u0430\u043D",42.7,70.5],["\u0422\u0443\u0440\u043A\u043C\u0435\u043D\u0438\u044F",45.9,65.3],["\u0423\u0437\u0431\u0435\u043A\u0438\u0441\u0442\u0430\u043D",35.6,69.3],["\u0423\u043A\u0440\u0430\u0438\u043D\u0430",14.9,70.5],["\u0413\u0440\u0443\u0437\u0438\u044F",18.3,72.6],["\u041B\u0430\u0442\u0432\u0438\u044F",15.9,69.2],["\u041B\u0438\u0442\u0432\u0430",15.2,70.7],["\u042D\u0441\u0442\u043E\u043D\u0438\u044F",15.7,70]],Ft=Ir([[71,17.1,12.2],[72,17,12],[74,18,13],[76,16.5,10.5],[75,16.3,11],[70,17.6,12.8],[73,17.8,13.1],[75,17.7,13.2],[72,17.5,13.4],[76,18,13.5]]);console.log(Ft);var q={RED:(o=.8)=>`rgba(255,65,54,${o})`,GREEN:(o=.8)=>`rgba(46,204,64,${o})`,BLUE:(o=.8)=>`rgba(0,116,217,${o})`,GOLD:(o=.8)=>`rgba(238,170,0,${o})`,PURPLE:(o=.8)=>`rgba(102,51,102,${o})`,BLACK:(o=.8)=>`rgba(0,0,0,${o})`};var Gr=(o,e=1,r)=>{let t=o.slice(0,e),n=Dr(o.length,e),s=ve(o.length,-1),i=!0,h=0;for(r&&r(t.slice(),s.slice(),h);i;){i=!1,h++;for(let u in o){for(let l=0;l<e;l++)n[u][l]=Math.hypot(...Object.keys(o[0]).map(c=>o[u][c]-t[l][c]));let a=n[u].indexOf(Math.min(...n[u]));s[u]!==a&&(i=!0),s[u]=a}for(let u=0;u<e;u++){t[u]=ve(o[0].length,0);let a=o.reduce((l,c,m)=>{if(s[m]===u){l++;for(let f in o[0])t[u][f]+=o[m][f]}return l},0);for(let l in o[0])t[u][l]=t[u][l]/a}r&&r(t.slice(),s.slice(),h)}return s};var X=Ie(fn());var ne=300;function pn(o,e){let{minX:r,minY:t,minZ:n,maxX:s,maxY:i,maxZ:h}=Lr(Me(e[0].points),Me(e[1].points));console.log({minX:r,minY:t,minZ:n,maxX:s,maxY:i,maxZ:h});let u=Math.min(r,t,n),a=Math.max(s-r,i-t,h-n);console.log(a);let l=f=>(f-u)*ne/a;console.log(l(.4));let c=new X.default.Illustration({element:o,rotate:{y:X.default.TAU/8,x:-X.default.TAU/12,z:X.default.TAU/2},dragRotate:!0});new X.default.Shape({addTo:c,stroke:2,path:[{},{x:ne}],color:q.RED()}),new X.default.Shape({addTo:c,stroke:2,path:[{},{y:ne}],color:q.GREEN()}),new X.default.Shape({addTo:c,stroke:2,path:[{},{z:ne}],color:q.BLUE()});for(let f of e)for(let p of f.points)new X.default.Shape({addTo:c,stroke:l(f.centerRadius*2),translate:{x:l(p.x),y:l(p.y),z:l(p.z)},color:f.centerColor}),f.color&&f.radius&&new X.default.Shape({addTo:c,stroke:l(f.radius*2),translate:{x:l(p.x),y:l(p.y),z:l(p.z)},color:f.color});function m(){c.updateRenderGraph(),requestAnimationFrame(m)}return m(),c}var yo=1e-9,dn=(o,e)=>Math.max(...[o[0]-e[0],o[1]-e[1],o[2]-e[2]].map(Math.abs))<yo,mn=(o,e,r)=>e.filter(t=>Math.hypot(t[0]-o[0],t[1]-o[1],t[2]-o[2])<=r);function gn(o){let e=ht(o.map(n=>n[0])),r=ht(o.map(n=>n[1])),t=ht(o.map(n=>n[2]));return[e||0,r||0,t||0]}function wn(o,e,r){let t=o.slice(),n=[];for(;t.length>0;){let s=t[Fr(0,t.length)],i=mn(s,t,e),h=gn(i);for(;!dn(h,s);)s=h,i=mn(s,t,e),h=gn(i);r&&r(h),n.push(h),t=t.filter(u=>!i.some(a=>dn(u,a)))}return n.map(s=>({x:s[0],y:s[1],z:s[2]}))}var F=800,C=16,yn=2e3,oe=!1,[Mt,Pe]=Lt(Q.map(o=>o[1])),[St,Re]=Lt(Q.map(o=>o[2]));console.log({minX:Mt,maxX:Pe,minY:St,maxY:Re});var se=o=>C+(o-Mt)*F/(Pe-Mt),ie=o=>F+C-(o-St)*F/(Re-St),Ce=o=>Mt+(o-C)*(Pe-Mt)/F,ze=o=>St+(F+C-o)*(Re-St)/F;function Te(o,e,r,t){for(let n of e.children)Te(o,n,r+1,t);if(e.index>=0){let n=Q[e.index];e.x=se(n[1]),e.y=ie(n[2]),o.circle(e.x,e.y,C,{fill:q.BLUE(),stroke:q.BLUE()}),oe&&wt(o.ctx,e.x,e.y,`${K(n[1])},${K(n[2])}`)}else{let n=e.children.map(i=>i.x),s=e.children.map(i=>i.y);e.x=ht(n),e.y=ht(s),setTimeout(()=>{let i=(t-r)/t;o.rectangle(e.x-C/2,e.y-C/2,C,C,{fill:q.RED(i),stroke:q.RED(i)});for(let h=0;h<n.length;h++)o.line(e.x,e.y,n[h],s[h],{stroke:q.BLACK(i*.5)});oe&&wt(o.ctx,e.x,e.y,`${K(Ce(e.x))},${K(ze(e.y))}`)},(t-r)*yn)}}var Oe=ye(Q.map(o=>[o[1],o[2]]),{method:"complete"}),vn=It(Oe);console.log(Oe,vn);var Mn=Ot.canvas(gt(F+2*C));Mn.rectangle(C,C,F,F,{stroke:q.BLACK(.1)});Te(Mn,Oe,0,vn);var qe=ye(Q.map(o=>[o[1],o[2]]),{method:"single"}),Sn=It(qe);console.log(qe,Sn);var kn=Ot.canvas(gt(F+2*C));kn.rectangle(C,C,F,F,{stroke:q.BLACK(.1)});Te(kn,qe,0,Sn);var at=Ot.canvas(gt(F+2*C));Gr(Q.map(o=>[o[1],o[2]]),5,(o,e,r)=>{setTimeout(()=>{at.ctx.clearRect(0,0,C*2+F,C*2+F),at.rectangle(C,C,F,F,{stroke:q.BLACK(.1)});for(let t of Q){let n=se(t[1]),s=ie(t[2]);at.circle(n,s,C,{fill:q.BLUE(),stroke:q.BLUE()}),oe&&wt(at.ctx,n,s,`${K(Ce(n))},${K(ze(s))}`)}for(let t=0;t<o.length;t++){let n=o[t],s=se(n[0]),i=ie(n[1]);at.rectangle(s-C/2,i-C/2,C,C,{fill:q.RED(),stroke:q.RED()});for(let h=0;h<e.length;h++){if(e[h]!==t)continue;let u=Q[h];at.line(se(u[1]),ie(u[2]),s,i,{stroke:q.GOLD(.4)})}oe&&wt(at.ctx,s,i,`${K(Ce(s))},${K(ze(i))}`)}},yn*r)});var bn=.3,vo=Ft.map(o=>({x:o[0],y:o[1],z:o[2]})),xn=wn(Ft,bn);console.log(xn);pn(gt(F+2*C),[{points:vo,centerColor:q.BLUE(.5),centerRadius:.01},{points:xn,radius:bn,color:q.GOLD(.2),centerColor:q.RED(1),centerRadius:.01}]);})();
/*!
 * Zdog v1.1.2
 * Round, flat, designer-friendly pseudo-3D engine
 * Licensed MIT
 * https://zzz.dog
 * Copyright 2020 Metafizzy
 */
